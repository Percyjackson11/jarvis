<div class="message-row bubble bot-row svelte-1e1jlin" style="box-sizing: border-box; border-width: 0px; border-style: solid; display: flex; position: relative; margin-bottom: var(--spacing-xl); align-self: flex-start; max-width: calc(100% - var(--spacing-xl) * 6); color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px; background-color: rgb(17, 24, 39);"><div class="flex-wrap bot svelte-1e1jlin" style="box-sizing: border-box; border-width: 1px; border-style: solid; width: 985.375px; height: 2246.95px; border-color: var(--border-color-primary); border-top-left-radius: ; border-top-right-radius: ; border-bottom-right-radius: ; border-bottom-left-radius: 0px; box-shadow: var(--shadow-drop); align-self: flex-start; text-align: right; padding: var(--spacing-sm) var(--spacing-xl); background-color: var(--background-fill-secondary);"><div class="message bot svelte-1e1jlin panel-full-width" style="box-sizing: border-box; border-width: 0px; border-style: solid; position: relative; display: flex; flex-direction: column; width: 963.775px; color: var(--body-text-color); font-size: var(--chatbot-body-text-size); overflow-wrap: break-word; border-color: var(--border-color-primary);"><button data-testid="bot" dir="ltr" aria-label="bot's message: Here's a solution using PHP as a signaling server to automate the WebRTC connection process. I'll create three main components:

1. A PHP API
2. Modified host page
3. Modified viewer page

First, create a `signaling.php`:

```php
<?php
header('Content-Type: application/json');
header('Access-Control-Allow-Origin: *');
header('Access-Control-Allow-Methods: GET, POST');
header('Access-Control-Allow-Headers: Content-Type');

$db = new SQLite3('webrtc.db');

// Create table if it doesn't exist
$db->exec('CREATE TABLE IF NOT EXISTS streams (
    code TEXT PRIMARY KEY,
    offer TEXT,
    answer TEXT,
    timestamp INTEGER
)');

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $data = json_decode(file_get_contents('php://input'), true);
    $action = $data['action'];

    if ($action === 'create') {
        // Generate a unique 6-digit code
        do {
            $code = str_pad(rand(0, 999999), 6, '0', STR_PAD_LEFT);
            $exists = $db->querySingle(&quot;SELECT 1 FROM streams WHERE code = '$code'&quot;);
        } while ($exists);

        $offer = $data['offer'];
        $timestamp = time();
        
        $stmt = $db->prepare('INSERT INTO streams (code, offer, timestamp) VALUES (:code, :offer, :timestamp)');
        $stmt->bindValue(':code', $code, SQLITE3_TEXT);
        $stmt->bindValue(':offer', $offer, SQLITE3_TEXT);
        $stmt->bindValue(':timestamp', $timestamp, SQLITE3_INTEGER);
        $stmt->execute();

        echo json_encode(['code' => $code]);
    }
    else if ($action === 'answer') {
        $code = $data['code'];
        $answer = $data['answer'];
        
        $stmt = $db->prepare('UPDATE streams SET answer = :answer WHERE code = :code');
        $stmt->bindValue(':code', $code, SQLITE3_TEXT);
        $stmt->bindValue(':answer', $answer, SQLITE3_TEXT);
        $stmt->execute();

        echo json_encode(['status' => 'success']);
    }
}
else if ($_SERVER['REQUEST_METHOD'] === 'GET') {
    $code = $_GET['code'];
    $type = $_GET['type'];

    if ($type === 'offer') {
        $result = $db->querySingle(&quot;SELECT offer FROM streams WHERE code = '$code'&quot;, false);
        echo json_encode(['offer' => $result]);
    }
    else if ($type === 'answer') {
        $result = $db->querySingle(&quot;SELECT answer FROM streams WHERE code = '$code'&quot;, false);
        echo json_encode(['answer' => $result]);
    }
}

$db->close();
?>
```

Modified `host.html`:

```html
<!DOCTYPE html>
<html lang=&quot;en&quot;>
<head>
    <meta charset=&quot;UTF-8&quot;>
    <meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;>
    <title>Host Video Stream</title>
</head>
<body>
    <h1>Host Video Stream</h1>
    <video id=&quot;localVideo&quot; autoplay muted></video>
    <div id=&quot;streamCode&quot;></div>
    <button onclick=&quot;startStream()&quot;>Start Stream</button>

    <script>
        let localStream;
        let peerConnection;
        let streamCode;
        const servers = { iceServers: [{ urls: 'stun:stun.l.google.com:19302' }] };

        async function startStream() {
            localStream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
            document.getElementById('localVideo').srcObject = localStream;

            peerConnection = new RTCPeerConnection(servers);
            localStream.getTracks().forEach(track => peerConnection.addTrack(track, localStream));

            const offer = await peerConnection.createOffer();
            await peerConnection.setLocalDescription(" class="svelte-1e1jlin" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 20px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; width: 963.775px; user-select: text; text-align: left;"><span class="md svelte-8tpqd2 chatbot prose" style="box-sizing: border-box; border-width: 0px; border-style: solid; font-size: 18px; font-weight: var(--prose-text-weight); opacity: 0.8;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">Here's a solution using PHP as a signaling server to automate the WebRTC connection process. I'll create three main components:</p><ol style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; padding: 0px; color: var(--body-text-color); list-style-position: inside; list-style-image: initial;"><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;">A PHP API</li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;">Modified host page</li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">Modified viewer page</li></ol><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: var(--spacing-xxl); margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">First, create a&nbsp;<code style="box-sizing: border-box; border: 1px solid var(--panel-border-color); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; border-radius: var(--radius-xs); padding: var(--spacing-xxs) var(--spacing-xs); margin-bottom: 0px !important;">signaling.php</code>:</p><div class="code_wrap" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: relative;"></div></span></button><button class="copy_code_button" title="copy" style="border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-sm); margin-left: 0px; padding: var(--spacing-md); font-weight: inherit; font-size: 18px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: absolute; top: var(--spacing-md); right: var(--spacing-md); z-index: 1; border-bottom-left-radius: var(--radius-sm); width: 25px; height: 25px;"><span class="copy-text" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><svg viewBox="0 0 32 32" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z" fill="currentColor"></path><path d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z" fill="currentColor"></path></svg></span><span class="check" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: absolute; top: 0px; right: 0px; opacity: 0; z-index: var(--layer-top); transition: opacity 0.2s; background: var(--background-fill-primary); padding: var(--size-1); width: 25px; height: 25px; margin-bottom: 0px !important;"><svg stroke-linejoin="round" stroke-linecap="round" stroke-width="3" stroke="currentColor" fill="none" viewBox="0 0 24 24" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><polyline points="20 6 9 17 4 12"></polyline></svg></span></button><pre style="box-sizing: border-box; border: none; margin-top: var(--spacing-sm); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; overflow: auto; position: relative; box-shadow: none; padding: var(--spacing-lg) var(--spacing-xl); text-shadow: none; border-radius: var(--radius-sm); margin-bottom: 0px !important;"><code class="language-php" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); background: none; font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; margin-bottom: 0px !important;">&lt;?php
header('Content-Type: application/json');
header('Access-Control-Allow-Origin: *');
header('Access-Control-Allow-Methods: GET, POST');
header('Access-Control-Allow-Headers: Content-Type');

$db = new SQLite3('webrtc.db');

// Create table if it doesn't exist
$db-&gt;exec('CREATE TABLE IF NOT EXISTS streams (
    code TEXT PRIMARY KEY,
    offer TEXT,
    answer TEXT,
    timestamp INTEGER
)');

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $data = json_decode(file_get_contents('php://input'), true);
    $action = $data['action'];

    if ($action === 'create') {
        // Generate a unique 6-digit code
        do {
            $code = str_pad(rand(0, 999999), 6, '0', STR_PAD_LEFT);
            $exists = $db-&gt;querySingle("SELECT 1 FROM streams WHERE code = '$code'");
        } while ($exists);

        $offer = $data['offer'];
        $timestamp = time();
        
        $stmt = $db-&gt;prepare('INSERT INTO streams (code, offer, timestamp) VALUES (:code, :offer, :timestamp)');
        $stmt-&gt;bindValue(':code', $code, SQLITE3_TEXT);
        $stmt-&gt;bindValue(':offer', $offer, SQLITE3_TEXT);
        $stmt-&gt;bindValue(':timestamp', $timestamp, SQLITE3_INTEGER);
        $stmt-&gt;execute();

        echo json_encode(['code' =&gt; $code]);
    }
    else if ($action === 'answer') {
        $code = $data['code'];
        $answer = $data['answer'];
        
        $stmt = $db-&gt;prepare('UPDATE streams SET answer = :answer WHERE code = :code');
        $stmt-&gt;bindValue(':code', $code, SQLITE3_TEXT);
        $stmt-&gt;bindValue(':answer', $answer, SQLITE3_TEXT);
        $stmt-&gt;execute();

        echo json_encode(['status' =&gt; 'success']);
    }
}
else if ($_SERVER['REQUEST_METHOD'] === 'GET') {
    $code = $_GET['code'];
    $type = $_GET['type'];

    if ($type === 'offer') {
        $result = $db-&gt;querySingle("SELECT offer FROM streams WHERE code = '$code'", false);
        echo json_encode(['offer' =&gt; $result]);
    }
    else if ($type === 'answer') {
        $result = $db-&gt;querySingle("SELECT answer FROM streams WHERE code = '$code'", false);
        echo json_encode(['answer' =&gt; $result]);
    }
}

$db-&gt;close();
?&gt;
</code></pre></div><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: var(--spacing-xxl); margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">Modified&nbsp;<code style="box-sizing: border-box; border: 1px solid var(--panel-border-color); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; border-radius: var(--radius-xs); padding: var(--spacing-xxs) var(--spacing-xs); margin-bottom: 0px !important;">host.html</code>:</p><div class="code_wrap" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: relative; margin-bottom: 0px !important;"><button class="copy_code_button" title="copy" style="border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-sm); margin-left: 0px; padding: var(--spacing-md); font-weight: inherit; font-size: 18px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: absolute; top: var(--spacing-md); right: var(--spacing-md); z-index: 1; border-bottom-left-radius: var(--radius-sm); width: 25px; height: 25px;"><span class="copy-text" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><svg viewBox="0 0 32 32" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z" fill="currentColor"></path><path d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z" fill="currentColor"></path></svg></span><span class="check" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: absolute; top: 0px; right: 0px; opacity: 0; z-index: var(--layer-top); transition: opacity 0.2s; background: var(--background-fill-primary); padding: var(--size-1); width: 25px; height: 25px; margin-bottom: 0px !important;"><svg stroke-linejoin="round" stroke-linecap="round" stroke-width="3" stroke="currentColor" fill="none" viewBox="0 0 24 24" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><polyline points="20 6 9 17 4 12"></polyline></svg></span></button><pre style="box-sizing: border-box; border: none; margin-top: var(--spacing-sm); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; overflow: auto; position: relative; box-shadow: none; padding: var(--spacing-lg) var(--spacing-xl); text-shadow: none; border-radius: var(--radius-sm); margin-bottom: 0px !important;"><code class="language-html" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); background: none; font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; margin-bottom: 0px !important;"><span class="token doctype" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">&lt;!</span><span class="token doctype-tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);">DOCTYPE</span> <span class="token name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);">html</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>html</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">lang</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>en<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>head</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>meta</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">charset</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>UTF-8<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>meta</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">name</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>viewport<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">content</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>width=device-width, initial-scale=1.0<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>title</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>Host Video Stream<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>title</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>head</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>body</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>h1</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>Host Video Stream<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>h1</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>video</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">id</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>localVideo<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">autoplay</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">muted</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>video</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>div</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">id</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>streamCode<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>div</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>button</span> <span class="token special-attr" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">onclick</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121); margin-bottom: 0px !important;"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span><span class="token value javascript language-javascript" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">startStream</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">)</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>Start Stream<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>button</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>

    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117); margin-bottom: 0px !important;"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>script</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
        let localStream;
        let peerConnection;
        let streamCode;
        const servers = { iceServers: [{ urls: 'stun:stun.l.google.com:19302' }] };

        async function startStream() {
            localStream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
            document.getElementById('localVideo').srcObject = localStream;

            peerConnection = new RTCPeerConnection(servers);
            localStream.getTracks().forEach(track =&gt; peerConnection.addTrack(track, localStream));

            const offer = await peerConnection.createOffer();
            await peerConnection.setLocalDescription(
</code></pre></div></div></div><div class="message-buttons-left bubble message-buttons false svelte-hs6bgi" style="box-sizing: border-box; border: 1px solid var(--border-color-primary); border-radius: var(--radius-md); display: flex; align-items: center; height: var(--size-7); align-self: start; margin: 0px calc(var(--spacing-xl) * 3); z-index: 1; padding: var(--spacing-md) var(--spacing-md); background-color: rgb(17, 24, 39); gap: var(--spacing-md); left: 0px; color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px;"><button class="action svelte-6u540h" title="copy" aria-label="Copy message" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 16px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: relative; top: 0px; right: 0px; width: var(--size-4); height: var(--size-4);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 33 33" color="currentColor" aria-hidden="true"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg></button></div><div class="message-row bubble user-row svelte-1e1jlin" style="box-sizing: border-box; border-width: 0px; border-style: solid; display: flex; position: relative; align-self: flex-end; margin-bottom: var(--spacing-xl); flex-direction: row; justify-content: flex-end; color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px; background-color: rgb(17, 24, 39);"><div class="flex-wrap user svelte-1e1jlin" style="box-sizing: border-box; border-width: 1px; border-style: solid; width: 88.1125px; height: 38.85px; align-self: flex-start; border-top-left-radius: ; border-top-right-radius: ; border-bottom-left-radius: ; border-bottom-right-radius: 0px; box-shadow: var(--shadow-drop); text-align: right; padding: var(--spacing-sm) var(--spacing-xl); border-color: var(--border-color-accent-subdued); background-color: var(--color-accent-soft);"><div class="message user svelte-1e1jlin panel-full-width" style="box-sizing: border-box; border-width: 0px; border-style: solid; position: relative; display: flex; flex-direction: column; width: 66.5125px; color: var(--body-text-color); font-size: var(--chatbot-body-text-size); overflow-wrap: break-word; align-self: flex-end;"><button data-testid="user" dir="ltr" aria-label="user's message: continue" class="svelte-1e1jlin" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 20px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; width: 66.5125px; user-select: text; text-align: left;"><span class="md svelte-8tpqd2 chatbot prose" style="box-sizing: border-box; border-width: 0px; border-style: solid; font-size: 18px; font-weight: var(--prose-text-weight); opacity: 0.8;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: 0px !important; margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">continue</p></span></button></div></div></div><div class="message-buttons-right bubble message-buttons false svelte-hs6bgi" style="box-sizing: border-box; border: 1px solid var(--border-color-primary); border-radius: var(--radius-md); display: flex; align-items: center; height: var(--size-7); align-self: self-end; margin: 0px calc(var(--spacing-xl) * 3); z-index: 1; padding: var(--spacing-md) var(--spacing-md); background-color: rgb(17, 24, 39); gap: var(--spacing-md); color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px;"><button class="action svelte-6u540h" title="copy" aria-label="Copy message" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 16px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: relative; top: 0px; right: 0px; width: var(--size-4); height: var(--size-4);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 33 33" color="currentColor" aria-hidden="true"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg></button></div><div class="message-row bubble bot-row svelte-1e1jlin" style="box-sizing: border-box; border-width: 0px; border-style: solid; display: flex; position: relative; margin-bottom: var(--spacing-xl); align-self: flex-start; max-width: calc(100% - var(--spacing-xl) * 6); color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px; background-color: rgb(17, 24, 39);"><div class="flex-wrap bot svelte-1e1jlin" style="box-sizing: border-box; border-width: 1px; border-style: solid; width: 873.2px; height: 2543.1px; border-color: var(--border-color-primary); border-top-left-radius: ; border-top-right-radius: ; border-bottom-right-radius: ; border-bottom-left-radius: 0px; box-shadow: var(--shadow-drop); align-self: flex-start; text-align: right; padding: var(--spacing-sm) var(--spacing-xl); background-color: var(--background-fill-secondary);"><div class="message bot svelte-1e1jlin panel-full-width" style="box-sizing: border-box; border-width: 0px; border-style: solid; position: relative; display: flex; flex-direction: column; width: 851.6px; color: var(--body-text-color); font-size: var(--chatbot-body-text-size); overflow-wrap: break-word; border-color: var(--border-color-primary);"><button data-testid="bot" dir="ltr" aria-label="bot's message: Here's the complete modified `host.html`:

```html
<!DOCTYPE html>
<html lang=&quot;en&quot;>
<head>
    <meta charset=&quot;UTF-8&quot;>
    <meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;>
    <title>Host Video Stream</title>
    <style>
        #streamCode {
            font-size: 24px;
            margin: 20px 0;
            padding: 10px;
            background-color: #f0f0f0;
        }
    </style>
</head>
<body>
    <h1>Host Video Stream</h1>
    <video id=&quot;localVideo&quot; autoplay muted></video>
    <div id=&quot;streamCode&quot;></div>
    <button onclick=&quot;startStream()&quot;>Start Stream</button>

    <script>
        let localStream;
        let peerConnection;
        let streamCode;
        const servers = { iceServers: [{ urls: 'stun:stun.l.google.com:19302' }] };
        const API_URL = 'http://your-domain.com/signaling.php'; // Replace with your actual API URL

        async function startStream() {
            localStream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
            document.getElementById('localVideo').srcObject = localStream;

            peerConnection = new RTCPeerConnection(servers);
            localStream.getTracks().forEach(track => peerConnection.addTrack(track, localStream));

            const offer = await peerConnection.createOffer();
            await peerConnection.setLocalDescription(offer);

            // Wait for ICE gathering to complete
            await new Promise(resolve => {
                if (peerConnection.iceGatheringState === 'complete') {
                    resolve();
                } else {
                    peerConnection.addEventListener('icegatheringstatechange', () => {
                        if (peerConnection.iceGatheringState === 'complete') {
                            resolve();
                        }
                    });
                }
            });

            // Send offer to server and get stream code
            const response = await fetch(API_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    action: 'create',
                    offer: JSON.stringify(peerConnection.localDescription)
                })
            });
            const data = await response.json();
            streamCode = data.code;
            document.getElementById('streamCode').textContent = `Stream Code: ${streamCode}`;

            // Poll for answer
            pollForAnswer();
        }

        async function pollForAnswer() {
            const checkAnswer = async () => {
                const response = await fetch(`${API_URL}?code=${streamCode}&amp;type=answer`);
                const data = await response.json();
                
                if (data.answer) {
                    const answer = JSON.parse(data.answer);
                    await peerConnection.setRemoteDescription(answer);
                    return true;
                }
                return false;
            };

            const poll = async () => {
                if (!await checkAnswer()) {
                    setTimeout(poll, 1000);
                }
            };

            poll();
        }
    </script>
</body>
</html>
```

And here's the modified `viewer.html`:

```html
<!DOCTYPE html>
<html lang=&quot;en&quot;>
<head>
    <meta charset=&quot;UTF-8&quot;>
    <meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;>
    <title>Viewer Video Stream</title>
    <style>
        #codeInput {
            font-size: 18px;
            padding: 5px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>Viewer Video Stream</h1>
    <input type=&quot;text&quot; id=&quot;codeInput&quot; placeholder=&quot;Enter stream code&quot;>
    <button onclick=&quot;connectToHost()&quot;>Connect to Stream</button>
    <video id=&quot;remoteVideo&quot; autoplay></video>

    <script" class="svelte-1e1jlin" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 20px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; width: 851.6px; user-select: text; text-align: left;"><span class="md svelte-8tpqd2 chatbot prose" style="box-sizing: border-box; border-width: 0px; border-style: solid; font-size: 18px; font-weight: var(--prose-text-weight); opacity: 0.8;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">Here's the complete modified&nbsp;<code style="box-sizing: border-box; border: 1px solid var(--panel-border-color); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; border-radius: var(--radius-xs); padding: var(--spacing-xxs) var(--spacing-xs); margin-bottom: 0px !important;">host.html</code>:</p><div class="code_wrap" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: relative;"></div></span></button><button class="copy_code_button" title="copy" style="border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-sm); margin-left: 0px; padding: var(--spacing-md); font-weight: inherit; font-size: 18px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: absolute; top: var(--spacing-md); right: var(--spacing-md); z-index: 1; border-bottom-left-radius: var(--radius-sm); width: 25px; height: 25px;"><span class="copy-text" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><svg viewBox="0 0 32 32" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z" fill="currentColor"></path><path d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z" fill="currentColor"></path></svg></span><span class="check" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: absolute; top: 0px; right: 0px; opacity: 0; z-index: var(--layer-top); transition: opacity 0.2s; background: var(--background-fill-primary); padding: var(--size-1); width: 25px; height: 25px; margin-bottom: 0px !important;"><svg stroke-linejoin="round" stroke-linecap="round" stroke-width="3" stroke="currentColor" fill="none" viewBox="0 0 24 24" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><polyline points="20 6 9 17 4 12"></polyline></svg></span></button><pre style="box-sizing: border-box; border: none; margin-top: var(--spacing-sm); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; overflow: auto; position: relative; box-shadow: none; padding: var(--spacing-lg) var(--spacing-xl); text-shadow: none; border-radius: var(--radius-sm); margin-bottom: 0px !important;"><code class="language-html" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); background: none; font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; margin-bottom: 0px !important;"><span class="token doctype" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">&lt;!</span><span class="token doctype-tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);">DOCTYPE</span> <span class="token name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);">html</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>html</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">lang</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>en<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>head</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>meta</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">charset</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>UTF-8<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>meta</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">name</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>viewport<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">content</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>width=device-width, initial-scale=1.0<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>title</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>Host Video Stream<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>title</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>style</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span><span class="token style" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token language-css" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">
        <span class="token selector" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">#streamCode</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">font-size</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 24px<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">margin</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 20px 0<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">padding</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 10px<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">background-color</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> #f0f0f0<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
        <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">}</span>
    </span></span><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>style</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>head</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>body</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>h1</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>Host Video Stream<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>h1</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>video</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">id</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>localVideo<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">autoplay</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">muted</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>video</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>div</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">id</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>streamCode<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>div</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>button</span> <span class="token special-attr" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">onclick</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121); margin-bottom: 0px !important;"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span><span class="token value javascript language-javascript" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">startStream</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">)</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>Start Stream<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>button</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>

    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>script</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span><span class="token script" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token language-javascript" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">
        <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">let</span> localStream<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
        <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">let</span> peerConnection<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
        <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">let</span> streamCode<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
        <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">const</span> servers <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span> <span class="token literal-property property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">iceServers</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">:</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">[</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span> <span class="token literal-property property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">urls</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">:</span> <span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'stun:stun.l.google.com:19302'</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">]</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
        <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">const</span> <span class="token constant" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">API_URL</span> <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'http://your-domain.com/signaling.php'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span> <span class="token comment" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(92, 99, 112);">// Replace with your actual API URL</span>

        <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">async</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">function</span> <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">startStream</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
            localStream <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">await</span> navigator<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>mediaDevices<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">getUserMedia</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span> <span class="token literal-property property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">video</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">:</span> <span class="token boolean" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">true</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">,</span> <span class="token literal-property property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">audio</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">:</span> <span class="token boolean" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">true</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            document<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">getElementById</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'localVideo'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>srcObject <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> localStream<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>

            peerConnection <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">new</span> <span class="token class-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">RTCPeerConnection</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>servers<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            localStream<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">getTracks</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">forEach</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token parameter" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);">track</span> <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=&gt;</span> peerConnection<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">addTrack</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>track<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">,</span> localStream<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>

            <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">const</span> offer <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">await</span> peerConnection<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">createOffer</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">await</span> peerConnection<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">setLocalDescription</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>offer<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>

            <span class="token comment" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(92, 99, 112);">// Wait for ICE gathering to complete</span>
            <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">await</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">new</span> <span class="token class-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">Promise</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token parameter" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);">resolve</span> <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=&gt;</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">if</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>peerConnection<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>iceGatheringState <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">===</span> <span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'complete'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                    <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">resolve</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">else</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                    peerConnection<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">addEventListener</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'icegatheringstatechange'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">,</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=&gt;</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                        <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">if</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>peerConnection<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>iceGatheringState <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">===</span> <span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'complete'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                            <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">resolve</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                        <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>
                    <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>
            <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>

            <span class="token comment" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(92, 99, 112);">// Send offer to server and get stream code</span>
            <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">const</span> response <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">await</span> <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">fetch</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token constant" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">API_URL</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">,</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                <span class="token literal-property property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">method</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">:</span> <span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'POST'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">,</span>
                <span class="token literal-property property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">headers</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">:</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                    <span class="token string-property property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">'Content-Type'</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">:</span> <span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'application/json'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">,</span>
                <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">,</span>
                <span class="token literal-property property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">body</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">:</span> <span class="token constant" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">JSON</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">stringify</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                    <span class="token literal-property property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">action</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">:</span> <span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'create'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">,</span>
                    <span class="token literal-property property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">offer</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">:</span> <span class="token constant" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">JSON</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">stringify</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>peerConnection<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>localDescription<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span>
                <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span>
            <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">const</span> data <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">await</span> response<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">json</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            streamCode <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> data<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>code<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            document<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">getElementById</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'streamCode'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>textContent <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token template-string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token template-punctuation string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">`</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">Stream Code: </span><span class="token interpolation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token interpolation-punctuation punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">${</span>streamCode<span class="token interpolation-punctuation punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">}</span></span><span class="token template-punctuation string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121); margin-bottom: 0px !important;">`</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>

            <span class="token comment" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(92, 99, 112);">// Poll for answer</span>
            <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">pollForAnswer</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
        <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>

        <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">async</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">function</span> <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">pollForAnswer</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
            <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">const</span> <span class="token function-variable function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">checkAnswer</span> <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">async</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=&gt;</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">const</span> response <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">await</span> <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">fetch</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token template-string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token template-punctuation string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">`</span><span class="token interpolation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token interpolation-punctuation punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">${</span><span class="token constant" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">API_URL</span><span class="token interpolation-punctuation punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">}</span></span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">?code=</span><span class="token interpolation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token interpolation-punctuation punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">${</span>streamCode<span class="token interpolation-punctuation punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">}</span></span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">&amp;type=answer</span><span class="token template-punctuation string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121); margin-bottom: 0px !important;">`</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">const</span> data <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">await</span> response<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">json</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                
                <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">if</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>data<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>answer<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                    <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">const</span> answer <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token constant" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">JSON</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">parse</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>data<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>answer<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                    <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">await</span> peerConnection<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">setRemoteDescription</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>answer<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                    <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">return</span> <span class="token boolean" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">true</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>
                <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">return</span> <span class="token boolean" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">false</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>

            <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">const</span> <span class="token function-variable function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">poll</span> <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">async</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=&gt;</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">if</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">!</span><span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">await</span> <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">checkAnswer</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                    <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">setTimeout</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>poll<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">,</span> <span class="token number" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">1000</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>
            <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>

            <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">poll</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
        <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">}</span>
    </span></span><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>script</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>body</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117); margin-bottom: 0px !important;"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>html</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
</code></pre></div><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: var(--spacing-xxl); margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">And here's the modified&nbsp;<code style="box-sizing: border-box; border: 1px solid var(--panel-border-color); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; border-radius: var(--radius-xs); padding: var(--spacing-xxs) var(--spacing-xs); margin-bottom: 0px !important;">viewer.html</code>:</p><div class="code_wrap" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: relative; margin-bottom: 0px !important;"><button class="copy_code_button" title="copy" style="border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-sm); margin-left: 0px; padding: var(--spacing-md); font-weight: inherit; font-size: 18px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: absolute; top: var(--spacing-md); right: var(--spacing-md); z-index: 1; border-bottom-left-radius: var(--radius-sm); width: 25px; height: 25px;"><span class="copy-text" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><svg viewBox="0 0 32 32" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z" fill="currentColor"></path><path d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z" fill="currentColor"></path></svg></span><span class="check" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: absolute; top: 0px; right: 0px; opacity: 0; z-index: var(--layer-top); transition: opacity 0.2s; background: var(--background-fill-primary); padding: var(--size-1); width: 25px; height: 25px; margin-bottom: 0px !important;"><svg stroke-linejoin="round" stroke-linecap="round" stroke-width="3" stroke="currentColor" fill="none" viewBox="0 0 24 24" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><polyline points="20 6 9 17 4 12"></polyline></svg></span></button><pre style="box-sizing: border-box; border: none; margin-top: var(--spacing-sm); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; overflow: auto; position: relative; box-shadow: none; padding: var(--spacing-lg) var(--spacing-xl); text-shadow: none; border-radius: var(--radius-sm); margin-bottom: 0px !important;"><code class="language-html" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); background: none; font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; margin-bottom: 0px !important;"><span class="token doctype" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">&lt;!</span><span class="token doctype-tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);">DOCTYPE</span> <span class="token name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);">html</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>html</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">lang</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>en<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>head</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>meta</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">charset</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>UTF-8<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>meta</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">name</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>viewport<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">content</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>width=device-width, initial-scale=1.0<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>title</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>Viewer Video Stream<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>title</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>style</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span><span class="token style" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token language-css" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">
        <span class="token selector" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">#codeInput</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">font-size</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 18px<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">padding</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 5px<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">margin</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 10px 0<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
        <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">}</span>
    </span></span><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>style</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>head</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>body</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>h1</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>Viewer Video Stream<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>h1</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>input</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">type</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>text<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">id</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>codeInput<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">placeholder</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>Enter stream code<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>button</span> <span class="token special-attr" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">onclick</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121); margin-bottom: 0px !important;"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span><span class="token value javascript language-javascript" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">connectToHost</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">)</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>Connect to Stream<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>button</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>video</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">id</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>remoteVideo<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">autoplay</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117); margin-bottom: 0px !important;"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>video</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>

    &lt;script
</code></pre></div></div></div><div class="message-buttons-left bubble message-buttons false svelte-hs6bgi" style="box-sizing: border-box; border: 1px solid var(--border-color-primary); border-radius: var(--radius-md); display: flex; align-items: center; height: var(--size-7); align-self: start; margin: 0px calc(var(--spacing-xl) * 3); z-index: 1; padding: var(--spacing-md) var(--spacing-md); background-color: rgb(17, 24, 39); gap: var(--spacing-md); left: 0px; color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px;"><button class="action svelte-6u540h" title="copy" aria-label="Copy message" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 16px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: relative; top: 0px; right: 0px; width: var(--size-4); height: var(--size-4);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 33 33" color="currentColor" aria-hidden="true"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg></button></div><div class="message-row bubble user-row svelte-1e1jlin" style="box-sizing: border-box; border-width: 0px; border-style: solid; display: flex; position: relative; align-self: flex-end; margin-bottom: var(--spacing-xl); flex-direction: row; justify-content: flex-end; color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px; background-color: rgb(17, 24, 39);"><div class="flex-wrap user svelte-1e1jlin" style="box-sizing: border-box; border-width: 1px; border-style: solid; width: 88.1125px; height: 38.85px; align-self: flex-start; border-top-left-radius: ; border-top-right-radius: ; border-bottom-left-radius: ; border-bottom-right-radius: 0px; box-shadow: var(--shadow-drop); text-align: right; padding: var(--spacing-sm) var(--spacing-xl); border-color: var(--border-color-accent-subdued); background-color: var(--color-accent-soft);"><div class="message user svelte-1e1jlin panel-full-width" style="box-sizing: border-box; border-width: 0px; border-style: solid; position: relative; display: flex; flex-direction: column; width: 66.5125px; color: var(--body-text-color); font-size: var(--chatbot-body-text-size); overflow-wrap: break-word; align-self: flex-end;"><button data-testid="user" dir="ltr" aria-label="user's message: continue" class="svelte-1e1jlin" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 20px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; width: 66.5125px; user-select: text; text-align: left;"><span class="md svelte-8tpqd2 chatbot prose" style="box-sizing: border-box; border-width: 0px; border-style: solid; font-size: 18px; font-weight: var(--prose-text-weight); opacity: 0.8;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: 0px !important; margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">continue</p></span></button></div></div></div><div class="message-buttons-right bubble message-buttons false svelte-hs6bgi" style="box-sizing: border-box; border: 1px solid var(--border-color-primary); border-radius: var(--radius-md); display: flex; align-items: center; height: var(--size-7); align-self: self-end; margin: 0px calc(var(--spacing-xl) * 3); z-index: 1; padding: var(--spacing-md) var(--spacing-md); background-color: rgb(17, 24, 39); gap: var(--spacing-md); color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px;"><button class="action svelte-6u540h" title="copy" aria-label="Copy message" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 16px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: relative; top: 0px; right: 0px; width: var(--size-4); height: var(--size-4);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 33 33" color="currentColor" aria-hidden="true"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg></button></div><div class="message-row bubble bot-row svelte-1e1jlin" style="box-sizing: border-box; border-width: 0px; border-style: solid; display: flex; position: relative; margin-bottom: var(--spacing-xl); align-self: flex-start; max-width: calc(100% - var(--spacing-xl) * 6); color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px; background-color: rgb(17, 24, 39);"><div class="flex-wrap bot svelte-1e1jlin" style="box-sizing: border-box; border-width: 1px; border-style: solid; width: 893.825px; height: 2590.85px; border-color: var(--border-color-primary); border-top-left-radius: ; border-top-right-radius: ; border-bottom-right-radius: ; border-bottom-left-radius: 0px; box-shadow: var(--shadow-drop); align-self: flex-start; text-align: right; padding: var(--spacing-sm) var(--spacing-xl); background-color: var(--background-fill-secondary);"><div class="message bot svelte-1e1jlin panel-full-width" style="box-sizing: border-box; border-width: 0px; border-style: solid; position: relative; display: flex; flex-direction: column; width: 872.225px; color: var(--body-text-color); font-size: var(--chatbot-body-text-size); overflow-wrap: break-word; border-color: var(--border-color-primary);"><button data-testid="bot" dir="ltr" aria-label="bot's message: Here's the complete `viewer.html`:

```html
<!DOCTYPE html>
<html lang=&quot;en&quot;>
<head>
    <meta charset=&quot;UTF-8&quot;>
    <meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;>
    <title>Viewer Video Stream</title>
    <style>
        #codeInput {
            font-size: 18px;
            padding: 5px;
            margin: 10px 0;
        }
        #remoteVideo {
            max-width: 100%;
            margin-top: 20px;
        }
        .error {
            color: red;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>Viewer Video Stream</h1>
    <input type=&quot;text&quot; id=&quot;codeInput&quot; placeholder=&quot;Enter stream code&quot;>
    <button onclick=&quot;connectToHost()&quot;>Connect to Stream</button>
    <div id=&quot;errorMessage&quot; class=&quot;error&quot;></div>
    <video id=&quot;remoteVideo&quot; autoplay></video>

    <script>
        let peerConnection;
        const servers = { iceServers: [{ urls: 'stun:stun.l.google.com:19302' }] };
        const API_URL = 'http://your-domain.com/signaling.php'; // Replace with your actual API URL

        async function connectToHost() {
            const streamCode = document.getElementById('codeInput').value.trim();
            if (!streamCode) {
                showError('Please enter a stream code');
                return;
            }

            try {
                // Get the offer from the server
                const response = await fetch(`${API_URL}?code=${streamCode}&amp;type=offer`);
                const data = await response.json();

                if (!data.offer) {
                    showError('Invalid stream code or stream not found');
                    return;
                }

                // Initialize WebRTC connection
                peerConnection = new RTCPeerConnection(servers);
                
                // Handle incoming streams
                peerConnection.ontrack = event => {
                    document.getElementById('remoteVideo').srcObject = event.streams[0];
                };

                // Set the offer and create answer
                const offer = JSON.parse(data.offer);
                await peerConnection.setRemoteDescription(offer);
                const answer = await peerConnection.createAnswer();
                await peerConnection.setLocalDescription(answer);

                // Wait for ICE gathering to complete
                await new Promise(resolve => {
                    if (peerConnection.iceGatheringState === 'complete') {
                        resolve();
                    } else {
                        peerConnection.addEventListener('icegatheringstatechange', () => {
                            if (peerConnection.iceGatheringState === 'complete') {
                                resolve();
                            }
                        });
                    }
                });

                // Send answer to server
                await fetch(API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        action: 'answer',
                        code: streamCode,
                        answer: JSON.stringify(peerConnection.localDescription)
                    })
                });

                // Clear any error messages
                showError('');

            } catch (error) {
                console.error('Error:', error);
                showError('Failed to connect to stream');
            }
        }

        function showError(message) {
            document.getElementById('errorMessage').textContent = message;
        }

        // Handle connection state changes
        peerConnection?.addEventListener('connectionstatechange', () => {
            if (peerConnection.connectionState === 'failed') {
                showError('Connection failed. Please try again.');
            }
        });
    </script>
</body>
</html>
```

To use this system:

1. Save the `signaling.php` file on your web server and make sure PHP has write permissions for the SQLite database.

2. Update the `API_URL` constant in both HTML files to point to your actual signaling.php URL.

3. Make sure your web server" class="svelte-1e1jlin" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 20px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; width: 872.225px; user-select: text; text-align: left;"><span class="md svelte-8tpqd2 chatbot prose" style="box-sizing: border-box; border-width: 0px; border-style: solid; font-size: 18px; font-weight: var(--prose-text-weight); opacity: 0.8;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">Here's the complete&nbsp;<code style="box-sizing: border-box; border: 1px solid var(--panel-border-color); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; border-radius: var(--radius-xs); padding: var(--spacing-xxs) var(--spacing-xs); margin-bottom: 0px !important;">viewer.html</code>:</p><div class="code_wrap" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: relative;"></div></span></button><button class="copy_code_button" title="copy" style="border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-sm); margin-left: 0px; padding: var(--spacing-md); font-weight: inherit; font-size: 18px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: absolute; top: var(--spacing-md); right: var(--spacing-md); z-index: 1; border-bottom-left-radius: var(--radius-sm); width: 25px; height: 25px;"><span class="copy-text" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><svg viewBox="0 0 32 32" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z" fill="currentColor"></path><path d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z" fill="currentColor"></path></svg></span><span class="check" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: absolute; top: 0px; right: 0px; opacity: 0; z-index: var(--layer-top); transition: opacity 0.2s; background: var(--background-fill-primary); padding: var(--size-1); width: 25px; height: 25px; margin-bottom: 0px !important;"><svg stroke-linejoin="round" stroke-linecap="round" stroke-width="3" stroke="currentColor" fill="none" viewBox="0 0 24 24" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><polyline points="20 6 9 17 4 12"></polyline></svg></span></button><pre style="box-sizing: border-box; border: none; margin-top: var(--spacing-sm); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; overflow: auto; position: relative; box-shadow: none; padding: var(--spacing-lg) var(--spacing-xl); text-shadow: none; border-radius: var(--radius-sm); margin-bottom: 0px !important;"><code class="language-html" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); background: none; font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; margin-bottom: 0px !important;"><span class="token doctype" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">&lt;!</span><span class="token doctype-tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);">DOCTYPE</span> <span class="token name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);">html</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>html</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">lang</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>en<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>head</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>meta</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">charset</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>UTF-8<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>meta</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">name</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>viewport<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">content</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>width=device-width, initial-scale=1.0<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>title</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>Viewer Video Stream<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>title</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>style</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span><span class="token style" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token language-css" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">
        <span class="token selector" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">#codeInput</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">font-size</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 18px<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">padding</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 5px<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">margin</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 10px 0<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
        <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>
        <span class="token selector" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">#remoteVideo</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">max-width</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 100%<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">margin-top</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 20px<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
        <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>
        <span class="token selector" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">.error</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">color</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> red<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">margin</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 10px 0<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
        <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">}</span>
    </span></span><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>style</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>head</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>body</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>h1</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>Viewer Video Stream<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>h1</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>input</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">type</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>text<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">id</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>codeInput<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">placeholder</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>Enter stream code<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>button</span> <span class="token special-attr" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">onclick</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121); margin-bottom: 0px !important;"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span><span class="token value javascript language-javascript" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">connectToHost</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">)</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>Connect to Stream<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>button</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>div</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">id</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>errorMessage<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">class</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>error<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>div</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>video</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">id</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>remoteVideo<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">autoplay</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>video</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>

    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>script</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span><span class="token script" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token language-javascript" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">
        <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">let</span> peerConnection<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
        <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">const</span> servers <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span> <span class="token literal-property property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">iceServers</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">:</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">[</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span> <span class="token literal-property property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">urls</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">:</span> <span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'stun:stun.l.google.com:19302'</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">]</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
        <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">const</span> <span class="token constant" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">API_URL</span> <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'http://your-domain.com/signaling.php'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span> <span class="token comment" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(92, 99, 112);">// Replace with your actual API URL</span>

        <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">async</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">function</span> <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">connectToHost</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
            <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">const</span> streamCode <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> document<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">getElementById</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'codeInput'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>value<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">trim</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">if</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">!</span>streamCode<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">showError</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'Please enter a stream code'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">return</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>

            <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">try</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                <span class="token comment" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(92, 99, 112);">// Get the offer from the server</span>
                <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">const</span> response <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">await</span> <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">fetch</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token template-string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token template-punctuation string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">`</span><span class="token interpolation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token interpolation-punctuation punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">${</span><span class="token constant" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">API_URL</span><span class="token interpolation-punctuation punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">}</span></span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">?code=</span><span class="token interpolation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token interpolation-punctuation punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">${</span>streamCode<span class="token interpolation-punctuation punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">}</span></span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">&amp;type=offer</span><span class="token template-punctuation string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121); margin-bottom: 0px !important;">`</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">const</span> data <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">await</span> response<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">json</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>

                <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">if</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">!</span>data<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>offer<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                    <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">showError</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'Invalid stream code or stream not found'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                    <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">return</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>

                <span class="token comment" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(92, 99, 112);">// Initialize WebRTC connection</span>
                peerConnection <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">new</span> <span class="token class-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">RTCPeerConnection</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>servers<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                
                <span class="token comment" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(92, 99, 112);">// Handle incoming streams</span>
                peerConnection<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function-variable function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">ontrack</span> <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token parameter" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);">event</span> <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=&gt;</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                    document<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">getElementById</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'remoteVideo'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>srcObject <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> event<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>streams<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">[</span><span class="token number" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">0</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">]</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>

                <span class="token comment" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(92, 99, 112);">// Set the offer and create answer</span>
                <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">const</span> offer <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token constant" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">JSON</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">parse</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>data<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>offer<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">await</span> peerConnection<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">setRemoteDescription</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>offer<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">const</span> answer <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">await</span> peerConnection<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">createAnswer</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">await</span> peerConnection<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">setLocalDescription</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>answer<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>

                <span class="token comment" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(92, 99, 112);">// Wait for ICE gathering to complete</span>
                <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">await</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">new</span> <span class="token class-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">Promise</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token parameter" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);">resolve</span> <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=&gt;</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                    <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">if</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>peerConnection<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>iceGatheringState <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">===</span> <span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'complete'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                        <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">resolve</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                    <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">else</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                        peerConnection<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">addEventListener</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'icegatheringstatechange'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">,</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=&gt;</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                            <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">if</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>peerConnection<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>iceGatheringState <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">===</span> <span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'complete'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                                <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">resolve</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                            <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>
                        <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                    <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>
                <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>

                <span class="token comment" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(92, 99, 112);">// Send answer to server</span>
                <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">await</span> <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">fetch</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token constant" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">API_URL</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">,</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                    <span class="token literal-property property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">method</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">:</span> <span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'POST'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">,</span>
                    <span class="token literal-property property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">headers</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">:</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                        <span class="token string-property property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">'Content-Type'</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">:</span> <span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'application/json'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">,</span>
                    <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">,</span>
                    <span class="token literal-property property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">body</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">:</span> <span class="token constant" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">JSON</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">stringify</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                        <span class="token literal-property property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">action</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">:</span> <span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'answer'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">,</span>
                        <span class="token literal-property property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">code</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">:</span> streamCode<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">,</span>
                        <span class="token literal-property property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">answer</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">:</span> <span class="token constant" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">JSON</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">stringify</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>peerConnection<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>localDescription<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span>
                    <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span>
                <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>

                <span class="token comment" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(92, 99, 112);">// Clear any error messages</span>
                <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">showError</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">''</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>

            <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">catch</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>error<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                console<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">error</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'Error:'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">,</span> error<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">showError</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'Failed to connect to stream'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>
        <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>

        <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">function</span> <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">showError</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token parameter" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);">message</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
            document<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">getElementById</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'errorMessage'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>textContent <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> message<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
        <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>

        <span class="token comment" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(92, 99, 112);">// Handle connection state changes</span>
        peerConnection<span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">?.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">addEventListener</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'connectionstatechange'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">,</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=&gt;</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
            <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">if</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>peerConnection<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>connectionState <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">===</span> <span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'failed'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">showError</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'Connection failed. Please try again.'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>
        <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">;</span>
    </span></span><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>script</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>body</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117); margin-bottom: 0px !important;"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>html</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
</code></pre></div><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: var(--spacing-xxl); margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">To use this system:</p><ol style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-left: 0px; padding: 0px; color: var(--body-text-color); list-style-position: inside; list-style-image: initial; margin-bottom: 0px !important;"><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: 0px !important; margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg); display: inline;">Save the&nbsp;<code style="box-sizing: border-box; border: 1px solid var(--panel-border-color); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; border-radius: var(--radius-xs); padding: var(--spacing-xxs) var(--spacing-xs); margin-bottom: 0px !important;">signaling.php</code>&nbsp;file on your web server and make sure PHP has write permissions for the SQLite database.</p></li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: 0px !important; margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg); display: inline;">Update the&nbsp;<code style="box-sizing: border-box; border: 1px solid var(--panel-border-color); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; border-radius: var(--radius-xs); padding: var(--spacing-xxs) var(--spacing-xs); margin-bottom: 0px !important;">API_URL</code>&nbsp;constant in both HTML files to point to your actual signaling.php URL.</p></li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: 0px !important; margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg); display: inline;">Make sure your web server</p></li></ol></div></div><div class="message-buttons-left bubble message-buttons false svelte-hs6bgi" style="box-sizing: border-box; border: 1px solid var(--border-color-primary); border-radius: var(--radius-md); display: flex; align-items: center; height: var(--size-7); align-self: start; margin: 0px calc(var(--spacing-xl) * 3); z-index: 1; padding: var(--spacing-md) var(--spacing-md); background-color: rgb(17, 24, 39); gap: var(--spacing-md); left: 0px; color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px;"><button class="action svelte-6u540h" title="copy" aria-label="Copy message" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 16px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: relative; top: 0px; right: 0px; width: var(--size-4); height: var(--size-4);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 33 33" color="currentColor" aria-hidden="true"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg></button></div><div class="message-row bubble user-row svelte-1e1jlin" style="box-sizing: border-box; border-width: 0px; border-style: solid; display: flex; position: relative; align-self: flex-end; margin-bottom: var(--spacing-xl); flex-direction: row; justify-content: flex-end; color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px; background-color: rgb(17, 24, 39);"><div class="flex-wrap user svelte-1e1jlin" style="box-sizing: border-box; border-width: 1px; border-style: solid; width: 739.875px; height: 38.85px; align-self: flex-start; border-top-left-radius: ; border-top-right-radius: ; border-bottom-left-radius: ; border-bottom-right-radius: 0px; box-shadow: var(--shadow-drop); text-align: right; padding: var(--spacing-sm) var(--spacing-xl); border-color: var(--border-color-accent-subdued); background-color: var(--color-accent-soft);"><div class="message user svelte-1e1jlin panel-full-width" style="box-sizing: border-box; border-width: 0px; border-style: solid; position: relative; display: flex; flex-direction: column; width: 718.275px; color: var(--body-text-color); font-size: var(--chatbot-body-text-size); overflow-wrap: break-word; align-self: flex-end;"><button data-testid="user" dir="ltr" aria-label="user's message: can you make the signaling php without database? like perhaps use txt file to store data instead?" class="svelte-1e1jlin" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 20px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; width: 718.275px; user-select: text; text-align: left;"><span class="md svelte-8tpqd2 chatbot prose" style="box-sizing: border-box; border-width: 0px; border-style: solid; font-size: 18px; font-weight: var(--prose-text-weight); opacity: 0.8;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: 0px !important; margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">can you make the signaling php without database? like perhaps use txt file to store data instead?</p></span></button></div></div></div><div class="message-buttons-right bubble message-buttons false svelte-hs6bgi" style="box-sizing: border-box; border: 1px solid var(--border-color-primary); border-radius: var(--radius-md); display: flex; align-items: center; height: var(--size-7); align-self: self-end; margin: 0px calc(var(--spacing-xl) * 3); z-index: 1; padding: var(--spacing-md) var(--spacing-md); background-color: rgb(17, 24, 39); gap: var(--spacing-md); color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px;"><button class="action svelte-6u540h" title="copy" aria-label="Copy message" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 16px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: relative; top: 0px; right: 0px; width: var(--size-4); height: var(--size-4);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 33 33" color="currentColor" aria-hidden="true"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg></button></div><div class="message-row bubble bot-row svelte-1e1jlin" style="box-sizing: border-box; border-width: 0px; border-style: solid; display: flex; position: relative; margin-bottom: var(--spacing-xl); align-self: flex-start; max-width: calc(100% - var(--spacing-xl) * 6); color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px; background-color: rgb(17, 24, 39);"><div class="flex-wrap bot svelte-1e1jlin" style="box-sizing: border-box; border-width: 1px; border-style: solid; width: 1263.3px; height: 2306.55px; border-color: var(--border-color-primary); border-top-left-radius: ; border-top-right-radius: ; border-bottom-right-radius: ; border-bottom-left-radius: 0px; box-shadow: var(--shadow-drop); align-self: flex-start; text-align: right; padding: var(--spacing-sm) var(--spacing-xl); background-color: var(--background-fill-secondary);"><div class="message bot svelte-1e1jlin panel-full-width" style="box-sizing: border-box; border-width: 0px; border-style: solid; position: relative; display: flex; flex-direction: column; width: 1241.7px; color: var(--body-text-color); font-size: var(--chatbot-body-text-size); overflow-wrap: break-word; border-color: var(--border-color-primary);"><button data-testid="bot" dir="ltr" aria-label="bot's message: Here's a simplified version of `signaling.php` using text files instead of a database:

```php
<?php
header('Content-Type: application/json');
header('Access-Control-Allow-Origin: *');
header('Access-Control-Allow-Methods: GET, POST');
header('Access-Control-Allow-Headers: Content-Type');

// Directory to store stream data
$streamDir = 'streams/';
if (!file_exists($streamDir)) {
    mkdir($streamDir, 0777, true);
}

// Clean up old streams (older than 1 hour)
cleanup($streamDir);

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $data = json_decode(file_get_contents('php://input'), true);
    $action = $data['action'];

    if ($action === 'create') {
        // Generate a unique 6-digit code
        do {
            $code = str_pad(rand(0, 999999), 6, '0', STR_PAD_LEFT);
        } while (file_exists($streamDir . $code . '.json'));

        // Save offer data
        $streamData = [
            'offer' => $data['offer'],
            'timestamp' => time(),
            'answer' => null
        ];
        
        file_put_contents($streamDir . $code . '.json', json_encode($streamData));
        echo json_encode(['code' => $code]);
    }
    else if ($action === 'answer') {
        $code = $data['code'];
        $filePath = $streamDir . $code . '.json';
        
        if (file_exists($filePath)) {
            $streamData = json_decode(file_get_contents($filePath), true);
            $streamData['answer'] = $data['answer'];
            file_put_contents($filePath, json_encode($streamData));
            echo json_encode(['status' => 'success']);
        } else {
            http_response_code(404);
            echo json_encode(['error' => 'Stream not found']);
        }
    }
}
else if ($_SERVER['REQUEST_METHOD'] === 'GET') {
    $code = $_GET['code'];
    $type = $_GET['type'];
    $filePath = $streamDir . $code . '.json';

    if (file_exists($filePath)) {
        $streamData = json_decode(file_get_contents($filePath), true);
        
        if ($type === 'offer') {
            echo json_encode(['offer' => $streamData['offer']]);
        }
        else if ($type === 'answer') {
            echo json_encode(['answer' => $streamData['answer']]);
        }
    } else {
        http_response_code(404);
        echo json_encode(['error' => 'Stream not found']);
    }
}

// Function to clean up old stream files
function cleanup($dir) {
    $files = glob($dir . '*.json');
    $now = time();
    
    foreach ($files as $file) {
        $streamData = json_decode(file_get_contents($file), true);
        // Delete files older than 1 hour
        if ($now - $streamData['timestamp'] > 3600) {
            unlink($file);
        }
    }
}
?>
```

This version:
1. Uses a directory called 'streams' to store JSON files for each stream
2. Each stream is stored in a separate file named with its code (e.g., &quot;123456.json&quot;)
3. Automatically cleans up streams older than 1 hour
4. Doesn't require any database setup

To use this:

1. Create a directory called 'streams' in the same directory as your signaling.php
2. Make sure the 'streams' directory is writable by PHP:
```bash
chmod 777 streams
```

The host.html and viewer.html files remain exactly the same as in the previous example. Just make sure to update the `API_URL` in both files to point to your signaling.php location.

This solution is simpler to set up and doesn't require a database, but it might not be as efficient for handling large numbers of concurrent streams. It's good for small to medium-scale applications." class="svelte-1e1jlin" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 20px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; width: 1241.7px; user-select: text; text-align: left;"><span class="md svelte-8tpqd2 chatbot prose" style="box-sizing: border-box; border-width: 0px; border-style: solid; font-size: 18px; font-weight: var(--prose-text-weight); opacity: 0.8;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">Here's a simplified version of&nbsp;<code style="box-sizing: border-box; border: 1px solid var(--panel-border-color); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; border-radius: var(--radius-xs); padding: var(--spacing-xxs) var(--spacing-xs); margin-bottom: 0px !important;">signaling.php</code>&nbsp;using text files instead of a database:</p><div class="code_wrap" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: relative;"></div></span></button><button class="copy_code_button" title="copy" style="border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-sm); margin-left: 0px; padding: var(--spacing-md); font-weight: inherit; font-size: 18px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: absolute; top: var(--spacing-md); right: var(--spacing-md); z-index: 1; border-bottom-left-radius: var(--radius-sm); width: 25px; height: 25px;"><span class="copy-text" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><svg viewBox="0 0 32 32" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z" fill="currentColor"></path><path d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z" fill="currentColor"></path></svg></span><span class="check" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: absolute; top: 0px; right: 0px; opacity: 0; z-index: var(--layer-top); transition: opacity 0.2s; background: var(--background-fill-primary); padding: var(--size-1); width: 25px; height: 25px; margin-bottom: 0px !important;"><svg stroke-linejoin="round" stroke-linecap="round" stroke-width="3" stroke="currentColor" fill="none" viewBox="0 0 24 24" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><polyline points="20 6 9 17 4 12"></polyline></svg></span></button><pre style="box-sizing: border-box; border: none; margin-top: var(--spacing-sm); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; overflow: auto; position: relative; box-shadow: none; padding: var(--spacing-lg) var(--spacing-xl); text-shadow: none; border-radius: var(--radius-sm); margin-bottom: 0px !important;"><code class="language-php" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); background: none; font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; margin-bottom: 0px !important;">&lt;?php
header('Content-Type: application/json');
header('Access-Control-Allow-Origin: *');
header('Access-Control-Allow-Methods: GET, POST');
header('Access-Control-Allow-Headers: Content-Type');

// Directory to store stream data
$streamDir = 'streams/';
if (!file_exists($streamDir)) {
    mkdir($streamDir, 0777, true);
}

// Clean up old streams (older than 1 hour)
cleanup($streamDir);

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $data = json_decode(file_get_contents('php://input'), true);
    $action = $data['action'];

    if ($action === 'create') {
        // Generate a unique 6-digit code
        do {
            $code = str_pad(rand(0, 999999), 6, '0', STR_PAD_LEFT);
        } while (file_exists($streamDir . $code . '.json'));

        // Save offer data
        $streamData = [
            'offer' =&gt; $data['offer'],
            'timestamp' =&gt; time(),
            'answer' =&gt; null
        ];
        
        file_put_contents($streamDir . $code . '.json', json_encode($streamData));
        echo json_encode(['code' =&gt; $code]);
    }
    else if ($action === 'answer') {
        $code = $data['code'];
        $filePath = $streamDir . $code . '.json';
        
        if (file_exists($filePath)) {
            $streamData = json_decode(file_get_contents($filePath), true);
            $streamData['answer'] = $data['answer'];
            file_put_contents($filePath, json_encode($streamData));
            echo json_encode(['status' =&gt; 'success']);
        } else {
            http_response_code(404);
            echo json_encode(['error' =&gt; 'Stream not found']);
        }
    }
}
else if ($_SERVER['REQUEST_METHOD'] === 'GET') {
    $code = $_GET['code'];
    $type = $_GET['type'];
    $filePath = $streamDir . $code . '.json';

    if (file_exists($filePath)) {
        $streamData = json_decode(file_get_contents($filePath), true);
        
        if ($type === 'offer') {
            echo json_encode(['offer' =&gt; $streamData['offer']]);
        }
        else if ($type === 'answer') {
            echo json_encode(['answer' =&gt; $streamData['answer']]);
        }
    } else {
        http_response_code(404);
        echo json_encode(['error' =&gt; 'Stream not found']);
    }
}

// Function to clean up old stream files
function cleanup($dir) {
    $files = glob($dir . '*.json');
    $now = time();
    
    foreach ($files as $file) {
        $streamData = json_decode(file_get_contents($file), true);
        // Delete files older than 1 hour
        if ($now - $streamData['timestamp'] &gt; 3600) {
            unlink($file);
        }
    }
}
?&gt;
</code></pre></div><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: var(--spacing-xxl); margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">This version:</p><ol style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; padding: 0px; color: var(--body-text-color); list-style-position: inside; list-style-image: initial;"><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;">Uses a directory called 'streams' to store JSON files for each stream</li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;">Each stream is stored in a separate file named with its code (e.g., "123456.json")</li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;">Automatically cleans up streams older than 1 hour</li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">Doesn't require any database setup</li></ol><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: var(--spacing-xxl); margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">To use this:</p><ol style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; padding: 0px; color: var(--body-text-color); list-style-position: inside; list-style-image: initial;"><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;">Create a directory called 'streams' in the same directory as your signaling.php</li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">Make sure the 'streams' directory is writable by PHP:</li></ol><div class="code_wrap" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: relative;"><button class="copy_code_button" title="copy" style="border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-sm); margin-left: 0px; padding: var(--spacing-md); font-weight: inherit; font-size: 18px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: absolute; top: var(--spacing-md); right: var(--spacing-md); z-index: 1; border-bottom-left-radius: var(--radius-sm); width: 25px; height: 25px;"><span class="copy-text" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><svg viewBox="0 0 32 32" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z" fill="currentColor"></path><path d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z" fill="currentColor"></path></svg></span><span class="check" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: absolute; top: 0px; right: 0px; opacity: 0; z-index: var(--layer-top); transition: opacity 0.2s; background: var(--background-fill-primary); padding: var(--size-1); width: 25px; height: 25px; margin-bottom: 0px !important;"><svg stroke-linejoin="round" stroke-linecap="round" stroke-width="3" stroke="currentColor" fill="none" viewBox="0 0 24 24" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><polyline points="20 6 9 17 4 12"></polyline></svg></span></button><pre style="box-sizing: border-box; border: none; margin-top: var(--spacing-sm); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; overflow: auto; position: relative; box-shadow: none; padding: var(--spacing-lg) var(--spacing-xl); text-shadow: none; border-radius: var(--radius-sm); margin-bottom: 0px !important;"><code class="language-bash" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); background: none; font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; margin-bottom: 0px !important;"><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">chmod</span> <span class="token number" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102); margin-bottom: 0px !important;">777</span> streams
</code></pre></div><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: var(--spacing-xxl); margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">The host.html and viewer.html files remain exactly the same as in the previous example. Just make sure to update the&nbsp;<code style="box-sizing: border-box; border: 1px solid var(--panel-border-color); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; border-radius: var(--radius-xs); padding: var(--spacing-xxs) var(--spacing-xs); margin-bottom: 0px !important;">API_URL</code>&nbsp;in both files to point to your signaling.php location.</p><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: var(--spacing-xxl); margin-right: 0px; margin-bottom: 0px !important; margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">This solution is simpler to set up and doesn't require a database, but it might not be as efficient for handling large numbers of concurrent streams. It's good for small to medium-scale applications.</p></div></div><div class="message-buttons-left bubble message-buttons false svelte-hs6bgi" style="box-sizing: border-box; border: 1px solid var(--border-color-primary); border-radius: var(--radius-md); display: flex; align-items: center; height: var(--size-7); align-self: start; margin: 0px calc(var(--spacing-xl) * 3); z-index: 1; padding: var(--spacing-md) var(--spacing-md); background-color: rgb(17, 24, 39); gap: var(--spacing-md); left: 0px; color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px;"><button class="action svelte-6u540h" title="copy" aria-label="Copy message" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 16px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: relative; top: 0px; right: 0px; width: var(--size-4); height: var(--size-4);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 33 33" color="currentColor" aria-hidden="true"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg></button></div><div class="message-row bubble user-row svelte-1e1jlin" style="box-sizing: border-box; border-width: 0px; border-style: solid; display: flex; position: relative; align-self: flex-end; margin-bottom: var(--spacing-xl); flex-direction: row; justify-content: flex-end; color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px; background-color: rgb(17, 24, 39);"><div class="flex-wrap user svelte-1e1jlin" style="box-sizing: border-box; border-width: 1px; border-style: solid; width: 1263.3px; height: 68.1px; align-self: flex-start; border-top-left-radius: ; border-top-right-radius: ; border-bottom-left-radius: ; border-bottom-right-radius: 0px; box-shadow: var(--shadow-drop); text-align: right; padding: var(--spacing-sm) var(--spacing-xl); border-color: var(--border-color-accent-subdued); background-color: var(--color-accent-soft);"><div class="message user svelte-1e1jlin panel-full-width" style="box-sizing: border-box; border-width: 0px; border-style: solid; position: relative; display: flex; flex-direction: column; width: 1241.7px; color: var(--body-text-color); font-size: var(--chatbot-body-text-size); overflow-wrap: break-word; align-self: flex-end;"><button data-testid="user" dir="ltr" aria-label="user's message: i think it's not working, when I start stream, it starts video but doesnt provide any unique code. i think it is not calling my signaling php only, as it didn't even create streams directory. (it has access)" class="svelte-1e1jlin" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 20px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; width: 1241.7px; user-select: text; text-align: left;"><span class="md svelte-8tpqd2 chatbot prose" style="box-sizing: border-box; border-width: 0px; border-style: solid; font-size: 18px; font-weight: var(--prose-text-weight); opacity: 0.8;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: 0px !important; margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">i think it's not working, when I start stream, it starts video but doesnt provide any unique code. i think it is not calling my signaling php only, as it didn't even create streams directory. (it has access)</p></span></button></div></div></div><div class="message-buttons-right bubble message-buttons false svelte-hs6bgi" style="box-sizing: border-box; border: 1px solid var(--border-color-primary); border-radius: var(--radius-md); display: flex; align-items: center; height: var(--size-7); align-self: self-end; margin: 0px calc(var(--spacing-xl) * 3); z-index: 1; padding: var(--spacing-md) var(--spacing-md); background-color: rgb(17, 24, 39); gap: var(--spacing-md); color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px;"><button class="action svelte-6u540h" title="copy" aria-label="Copy message" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 16px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: relative; top: 0px; right: 0px; width: var(--size-4); height: var(--size-4);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 33 33" color="currentColor" aria-hidden="true"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg></button></div><div class="message-row bubble bot-row svelte-1e1jlin" style="box-sizing: border-box; border-width: 0px; border-style: solid; display: flex; position: relative; margin-bottom: var(--spacing-xl); align-self: flex-start; max-width: calc(100% - var(--spacing-xl) * 6); color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px; background-color: rgb(17, 24, 39);"><div class="flex-wrap bot svelte-1e1jlin" style="box-sizing: border-box; border-width: 1px; border-style: solid; width: 898.4px; height: 2328.85px; border-color: var(--border-color-primary); border-top-left-radius: ; border-top-right-radius: ; border-bottom-right-radius: ; border-bottom-left-radius: 0px; box-shadow: var(--shadow-drop); align-self: flex-start; text-align: right; padding: var(--spacing-sm) var(--spacing-xl); background-color: var(--background-fill-secondary);"><div class="message bot svelte-1e1jlin panel-full-width" style="box-sizing: border-box; border-width: 0px; border-style: solid; position: relative; display: flex; flex-direction: column; width: 876.8px; color: var(--body-text-color); font-size: var(--chatbot-body-text-size); overflow-wrap: break-word; border-color: var(--border-color-primary);"><button data-testid="bot" dir="ltr" aria-label="bot's message: Let's debug this issue. First, let's add some console logging to the host.html to see what's happening:

```html
<!DOCTYPE html>
<html lang=&quot;en&quot;>
<head>
    <meta charset=&quot;UTF-8&quot;>
    <meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;>
    <title>Host Video Stream</title>
    <style>
        #streamCode {
            font-size: 24px;
            margin: 20px 0;
            padding: 10px;
            background-color: #f0f0f0;
        }
        #errorMessage {
            color: red;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>Host Video Stream</h1>
    <video id=&quot;localVideo&quot; autoplay muted></video>
    <div id=&quot;streamCode&quot;></div>
    <div id=&quot;errorMessage&quot;></div>
    <button onclick=&quot;startStream()&quot;>Start Stream</button>

    <script>
        let localStream;
        let peerConnection;
        let streamCode;
        const servers = { iceServers: [{ urls: 'stun:stun.l.google.com:19302' }] };
        const API_URL = '/signaling.php'; // Make sure this points to the correct path

        async function startStream() {
            try {
                console.log('Starting stream...');
                localStream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
                document.getElementById('localVideo').srcObject = localStream;
                console.log('Got media stream');

                peerConnection = new RTCPeerConnection(servers);
                localStream.getTracks().forEach(track => peerConnection.addTrack(track, localStream));
                console.log('Added tracks to peer connection');

                const offer = await peerConnection.createOffer();
                await peerConnection.setLocalDescription(offer);
                console.log('Created offer:', offer);

                // Wait for ICE gathering to complete
                await new Promise(resolve => {
                    if (peerConnection.iceGatheringState === 'complete') {
                        resolve();
                    } else {
                        peerConnection.addEventListener('icegatheringstatechange', () => {
                            console.log('ICE gathering state:', peerConnection.iceGatheringState);
                            if (peerConnection.iceGatheringState === 'complete') {
                                resolve();
                            }
                        });
                    }
                });

                console.log('ICE gathering completed');

                // Send offer to server and get stream code
                console.log('Sending offer to server...');
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        action: 'create',
                        offer: JSON.stringify(peerConnection.localDescription)
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                console.log('Server response:', data);
                
                streamCode = data.code;
                document.getElementById('streamCode').textContent = `Stream Code: ${streamCode}`;
                document.getElementById('errorMessage').textContent = '';

                // Poll for answer
                pollForAnswer();

            } catch (error) {
                console.error('Error in startStream:', error);
                document.getElementById('errorMessage').textContent = `Error: ${error.message}`;
            }
        }

        async function pollForAnswer() {
            const checkAnswer = async () => {
                try {
                    const response = await fetch(`${API_URL}?code=${streamCode}&amp;type=answer`);
                    const data = await response.json();
                    
                    if (data.answer) {
                        console.log('Got answer:', data.answer);
                        const answer = JSON.parse(data.answer);
                        await peerConnection.setRemoteDescription(answer);
                        return true;" class="svelte-1e1jlin" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 20px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; width: 876.8px; user-select: text; text-align: left;"><span class="md svelte-8tpqd2 chatbot prose" style="box-sizing: border-box; border-width: 0px; border-style: solid; font-size: 18px; font-weight: var(--prose-text-weight); opacity: 0.8;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">Let's debug this issue. First, let's add some console logging to the host.html to see what's happening:</p><div class="code_wrap" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: relative; margin-bottom: 0px !important;"></div></span></button><button class="copy_code_button" title="copy" style="border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-sm); margin-left: 0px; padding: var(--spacing-md); font-weight: inherit; font-size: 18px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: absolute; top: var(--spacing-md); right: var(--spacing-md); z-index: 1; border-bottom-left-radius: var(--radius-sm); width: 25px; height: 25px;"><span class="copy-text" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><svg viewBox="0 0 32 32" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z" fill="currentColor"></path><path d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z" fill="currentColor"></path></svg></span><span class="check" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: absolute; top: 0px; right: 0px; opacity: 0; z-index: var(--layer-top); transition: opacity 0.2s; background: var(--background-fill-primary); padding: var(--size-1); width: 25px; height: 25px; margin-bottom: 0px !important;"><svg stroke-linejoin="round" stroke-linecap="round" stroke-width="3" stroke="currentColor" fill="none" viewBox="0 0 24 24" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><polyline points="20 6 9 17 4 12"></polyline></svg></span></button><pre style="box-sizing: border-box; border: none; margin-top: var(--spacing-sm); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; overflow: auto; position: relative; box-shadow: none; padding: var(--spacing-lg) var(--spacing-xl); text-shadow: none; border-radius: var(--radius-sm); margin-bottom: 0px !important;"><code class="language-html" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); background: none; font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; margin-bottom: 0px !important;"><span class="token doctype" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">&lt;!</span><span class="token doctype-tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);">DOCTYPE</span> <span class="token name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);">html</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>html</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">lang</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>en<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>head</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>meta</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">charset</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>UTF-8<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>meta</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">name</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>viewport<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">content</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>width=device-width, initial-scale=1.0<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>title</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>Host Video Stream<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>title</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>style</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span><span class="token style" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token language-css" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">
        <span class="token selector" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">#streamCode</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">font-size</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 24px<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">margin</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 20px 0<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">padding</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 10px<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">background-color</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> #f0f0f0<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
        <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>
        <span class="token selector" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">#errorMessage</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">color</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> red<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">margin</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 10px 0<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
        <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">}</span>
    </span></span><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>style</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>head</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>body</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>h1</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>Host Video Stream<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>h1</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>video</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">id</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>localVideo<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">autoplay</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">muted</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>video</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>div</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">id</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>streamCode<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>div</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>div</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">id</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>errorMessage<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>div</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>button</span> <span class="token special-attr" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">onclick</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121); margin-bottom: 0px !important;"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span><span class="token value javascript language-javascript" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">startStream</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">)</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>Start Stream<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>button</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>

    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117); margin-bottom: 0px !important;"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>script</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
        let localStream;
        let peerConnection;
        let streamCode;
        const servers = { iceServers: [{ urls: 'stun:stun.l.google.com:19302' }] };
        const API_URL = '/signaling.php'; // Make sure this points to the correct path

        async function startStream() {
            try {
                console.log('Starting stream...');
                localStream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
                document.getElementById('localVideo').srcObject = localStream;
                console.log('Got media stream');

                peerConnection = new RTCPeerConnection(servers);
                localStream.getTracks().forEach(track =&gt; peerConnection.addTrack(track, localStream));
                console.log('Added tracks to peer connection');

                const offer = await peerConnection.createOffer();
                await peerConnection.setLocalDescription(offer);
                console.log('Created offer:', offer);

                // Wait for ICE gathering to complete
                await new Promise(resolve =&gt; {
                    if (peerConnection.iceGatheringState === 'complete') {
                        resolve();
                    } else {
                        peerConnection.addEventListener('icegatheringstatechange', () =&gt; {
                            console.log('ICE gathering state:', peerConnection.iceGatheringState);
                            if (peerConnection.iceGatheringState === 'complete') {
                                resolve();
                            }
                        });
                    }
                });

                console.log('ICE gathering completed');

                // Send offer to server and get stream code
                console.log('Sending offer to server...');
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        action: 'create',
                        offer: JSON.stringify(peerConnection.localDescription)
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                console.log('Server response:', data);
                
                streamCode = data.code;
                document.getElementById('streamCode').textContent = `Stream Code: ${streamCode}`;
                document.getElementById('errorMessage').textContent = '';

                // Poll for answer
                pollForAnswer();

            } catch (error) {
                console.error('Error in startStream:', error);
                document.getElementById('errorMessage').textContent = `Error: ${error.message}`;
            }
        }

        async function pollForAnswer() {
            const checkAnswer = async () =&gt; {
                try {
                    const response = await fetch(`${API_URL}?code=${streamCode}&amp;type=answer`);
                    const data = await response.json();
                    
                    if (data.answer) {
                        console.log('Got answer:', data.answer);
                        const answer = JSON.parse(data.answer);
                        await peerConnection.setRemoteDescription(answer);
                        return true;
</code></pre></div></div></div><div class="message-buttons-left bubble message-buttons false svelte-hs6bgi" style="box-sizing: border-box; border: 1px solid var(--border-color-primary); border-radius: var(--radius-md); display: flex; align-items: center; height: var(--size-7); align-self: start; margin: 0px calc(var(--spacing-xl) * 3); z-index: 1; padding: var(--spacing-md) var(--spacing-md); background-color: rgb(17, 24, 39); gap: var(--spacing-md); left: 0px; color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px;"><button class="action svelte-6u540h" title="copy" aria-label="Copy message" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 16px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: relative; top: 0px; right: 0px; width: var(--size-4); height: var(--size-4);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 33 33" color="currentColor" aria-hidden="true"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg></button></div><div class="message-row bubble user-row svelte-1e1jlin" style="box-sizing: border-box; border-width: 0px; border-style: solid; display: flex; position: relative; align-self: flex-end; margin-bottom: var(--spacing-xl); flex-direction: row; justify-content: flex-end; color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px; background-color: rgb(17, 24, 39);"><div class="flex-wrap user svelte-1e1jlin" style="box-sizing: border-box; border-width: 1px; border-style: solid; width: 88.1125px; height: 38.85px; align-self: flex-start; border-top-left-radius: ; border-top-right-radius: ; border-bottom-left-radius: ; border-bottom-right-radius: 0px; box-shadow: var(--shadow-drop); text-align: right; padding: var(--spacing-sm) var(--spacing-xl); border-color: var(--border-color-accent-subdued); background-color: var(--color-accent-soft);"><div class="message user svelte-1e1jlin panel-full-width" style="box-sizing: border-box; border-width: 0px; border-style: solid; position: relative; display: flex; flex-direction: column; width: 66.5125px; color: var(--body-text-color); font-size: var(--chatbot-body-text-size); overflow-wrap: break-word; align-self: flex-end;"><button data-testid="user" dir="ltr" aria-label="user's message: continue" class="svelte-1e1jlin" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 20px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; width: 66.5125px; user-select: text; text-align: left;"><span class="md svelte-8tpqd2 chatbot prose" style="box-sizing: border-box; border-width: 0px; border-style: solid; font-size: 18px; font-weight: var(--prose-text-weight); opacity: 0.8;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: 0px !important; margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">continue</p></span></button></div></div></div><div class="message-buttons-right bubble message-buttons false svelte-hs6bgi" style="box-sizing: border-box; border: 1px solid var(--border-color-primary); border-radius: var(--radius-md); display: flex; align-items: center; height: var(--size-7); align-self: self-end; margin: 0px calc(var(--spacing-xl) * 3); z-index: 1; padding: var(--spacing-md) var(--spacing-md); background-color: rgb(17, 24, 39); gap: var(--spacing-md); color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px;"><button class="action svelte-6u540h" title="copy" aria-label="Copy message" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 16px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: relative; top: 0px; right: 0px; width: var(--size-4); height: var(--size-4);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 33 33" color="currentColor" aria-hidden="true"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg></button></div><div class="message-row bubble bot-row svelte-1e1jlin" style="box-sizing: border-box; border-width: 0px; border-style: solid; display: flex; position: relative; margin-bottom: var(--spacing-xl); align-self: flex-start; max-width: calc(100% - var(--spacing-xl) * 6); color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px; background-color: rgb(17, 24, 39);"><div class="flex-wrap bot svelte-1e1jlin" style="box-sizing: border-box; border-width: 1px; border-style: solid; width: 898.4px; height: 2433.85px; border-color: var(--border-color-primary); border-top-left-radius: ; border-top-right-radius: ; border-bottom-right-radius: ; border-bottom-left-radius: 0px; box-shadow: var(--shadow-drop); align-self: flex-start; text-align: right; padding: var(--spacing-sm) var(--spacing-xl); background-color: var(--background-fill-secondary);"><div class="message bot svelte-1e1jlin panel-full-width" style="box-sizing: border-box; border-width: 0px; border-style: solid; position: relative; display: flex; flex-direction: column; width: 876.8px; color: var(--body-text-color); font-size: var(--chatbot-body-text-size); overflow-wrap: break-word; border-color: var(--border-color-primary);"><button data-testid="bot" dir="ltr" aria-label="bot's message: Here's the complete updated `host.html` with error handling and debugging:

```html
<!DOCTYPE html>
<html lang=&quot;en&quot;>
<head>
    <meta charset=&quot;UTF-8&quot;>
    <meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;>
    <title>Host Video Stream</title>
    <style>
        #streamCode {
            font-size: 24px;
            margin: 20px 0;
            padding: 10px;
            background-color: #f0f0f0;
        }
        #errorMessage {
            color: red;
            margin: 10px 0;
        }
        #debugInfo {
            font-family: monospace;
            white-space: pre-wrap;
            background-color: #f8f8f8;
            padding: 10px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Host Video Stream</h1>
    <video id=&quot;localVideo&quot; autoplay muted></video>
    <div id=&quot;streamCode&quot;></div>
    <div id=&quot;errorMessage&quot;></div>
    <button onclick=&quot;startStream()&quot;>Start Stream</button>
    <div id=&quot;debugInfo&quot;></div>

    <script>
        let localStream;
        let peerConnection;
        let streamCode;
        const servers = { iceServers: [{ urls: 'stun:stun.l.google.com:19302' }] };
        const API_URL = 'signaling.php'; // Update this to match your setup

        function debug(message) {
            console.log(message);
            const debugDiv = document.getElementById('debugInfo');
            debugDiv.textContent += message + '\n';
        }

        async function startStream() {
            try {
                debug('Starting stream...');
                
                // Clear previous error messages
                document.getElementById('errorMessage').textContent = '';
                document.getElementById('debugInfo').textContent = '';

                // Get media stream
                localStream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
                document.getElementById('localVideo').srcObject = localStream;
                debug('Got media stream');

                // Create peer connection
                peerConnection = new RTCPeerConnection(servers);
                localStream.getTracks().forEach(track => peerConnection.addTrack(track, localStream));
                debug('Added tracks to peer connection');

                // Create offer
                const offer = await peerConnection.createOffer();
                await peerConnection.setLocalDescription(offer);
                debug('Created and set local description');

                // Wait for ICE gathering
                debug('Waiting for ICE gathering...');
                await new Promise(resolve => {
                    if (peerConnection.iceGatheringState === 'complete') {
                        resolve();
                    } else {
                        peerConnection.addEventListener('icegatheringstatechange', () => {
                            debug(`ICE gathering state: ${peerConnection.iceGatheringState}`);
                            if (peerConnection.iceGatheringState === 'complete') {
                                resolve();
                            }
                        });
                    }
                });

                debug('Sending offer to server...');
                const requestBody = {
                    action: 'create',
                    offer: JSON.stringify(peerConnection.localDescription)
                };
                debug(`Request body: ${JSON.stringify(requestBody, null, 2)}`);

                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(requestBody)
                });

                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(`Server error (${response.status}): ${errorText}`);
                }

                const data = await response.json();
                debug(`Server response: ${JSON.stringify(data, null, 2)}`);

                if (!data.code) {
                    throw new Error('No stream code received from server');
                }

                streamCode = data.code" class="svelte-1e1jlin" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 20px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; width: 876.8px; user-select: text; text-align: left;"><span class="md svelte-8tpqd2 chatbot prose" style="box-sizing: border-box; border-width: 0px; border-style: solid; font-size: 18px; font-weight: var(--prose-text-weight); opacity: 0.8;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">Here's the complete updated&nbsp;<code style="box-sizing: border-box; border: 1px solid var(--panel-border-color); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; border-radius: var(--radius-xs); padding: var(--spacing-xxs) var(--spacing-xs); margin-bottom: 0px !important;">host.html</code>&nbsp;with error handling and debugging:</p><div class="code_wrap" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: relative; margin-bottom: 0px !important;"></div></span></button><button class="copy_code_button" title="copy" style="border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-sm); margin-left: 0px; padding: var(--spacing-md); font-weight: inherit; font-size: 18px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: absolute; top: var(--spacing-md); right: var(--spacing-md); z-index: 1; border-bottom-left-radius: var(--radius-sm); width: 25px; height: 25px;"><span class="copy-text" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><svg viewBox="0 0 32 32" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z" fill="currentColor"></path><path d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z" fill="currentColor"></path></svg></span><span class="check" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: absolute; top: 0px; right: 0px; opacity: 0; z-index: var(--layer-top); transition: opacity 0.2s; background: var(--background-fill-primary); padding: var(--size-1); width: 25px; height: 25px; margin-bottom: 0px !important;"><svg stroke-linejoin="round" stroke-linecap="round" stroke-width="3" stroke="currentColor" fill="none" viewBox="0 0 24 24" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><polyline points="20 6 9 17 4 12"></polyline></svg></span></button><pre style="box-sizing: border-box; border: none; margin-top: var(--spacing-sm); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; overflow: auto; position: relative; box-shadow: none; padding: var(--spacing-lg) var(--spacing-xl); text-shadow: none; border-radius: var(--radius-sm); margin-bottom: 0px !important;"><code class="language-html" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); background: none; font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; margin-bottom: 0px !important;"><span class="token doctype" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">&lt;!</span><span class="token doctype-tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);">DOCTYPE</span> <span class="token name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);">html</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>html</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">lang</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>en<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>head</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>meta</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">charset</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>UTF-8<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>meta</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">name</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>viewport<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">content</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>width=device-width, initial-scale=1.0<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>title</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>Host Video Stream<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>title</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>style</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span><span class="token style" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token language-css" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">
        <span class="token selector" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">#streamCode</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">font-size</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 24px<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">margin</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 20px 0<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">padding</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 10px<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">background-color</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> #f0f0f0<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
        <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>
        <span class="token selector" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">#errorMessage</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">color</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> red<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">margin</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 10px 0<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
        <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>
        <span class="token selector" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">#debugInfo</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">font-family</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> monospace<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">white-space</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> pre-wrap<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">background-color</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> #f8f8f8<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">padding</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 10px<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">margin-top</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 20px<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
        <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">}</span>
    </span></span><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>style</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>head</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>body</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>h1</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>Host Video Stream<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>h1</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>video</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">id</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>localVideo<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">autoplay</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">muted</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>video</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>div</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">id</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>streamCode<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>div</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>div</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">id</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>errorMessage<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>div</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>button</span> <span class="token special-attr" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">onclick</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121); margin-bottom: 0px !important;"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span><span class="token value javascript language-javascript" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">startStream</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">)</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>Start Stream<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>button</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>div</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">id</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>debugInfo<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>div</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>

    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117); margin-bottom: 0px !important;"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>script</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
        let localStream;
        let peerConnection;
        let streamCode;
        const servers = { iceServers: [{ urls: 'stun:stun.l.google.com:19302' }] };
        const API_URL = 'signaling.php'; // Update this to match your setup

        function debug(message) {
            console.log(message);
            const debugDiv = document.getElementById('debugInfo');
            debugDiv.textContent += message + '\n';
        }

        async function startStream() {
            try {
                debug('Starting stream...');
                
                // Clear previous error messages
                document.getElementById('errorMessage').textContent = '';
                document.getElementById('debugInfo').textContent = '';

                // Get media stream
                localStream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
                document.getElementById('localVideo').srcObject = localStream;
                debug('Got media stream');

                // Create peer connection
                peerConnection = new RTCPeerConnection(servers);
                localStream.getTracks().forEach(track =&gt; peerConnection.addTrack(track, localStream));
                debug('Added tracks to peer connection');

                // Create offer
                const offer = await peerConnection.createOffer();
                await peerConnection.setLocalDescription(offer);
                debug('Created and set local description');

                // Wait for ICE gathering
                debug('Waiting for ICE gathering...');
                await new Promise(resolve =&gt; {
                    if (peerConnection.iceGatheringState === 'complete') {
                        resolve();
                    } else {
                        peerConnection.addEventListener('icegatheringstatechange', () =&gt; {
                            debug(`ICE gathering state: ${peerConnection.iceGatheringState}`);
                            if (peerConnection.iceGatheringState === 'complete') {
                                resolve();
                            }
                        });
                    }
                });

                debug('Sending offer to server...');
                const requestBody = {
                    action: 'create',
                    offer: JSON.stringify(peerConnection.localDescription)
                };
                debug(`Request body: ${JSON.stringify(requestBody, null, 2)}`);

                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(requestBody)
                });

                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(`Server error (${response.status}): ${errorText}`);
                }

                const data = await response.json();
                debug(`Server response: ${JSON.stringify(data, null, 2)}`);

                if (!data.code) {
                    throw new Error('No stream code received from server');
                }

                streamCode = data.code
</code></pre></div></div></div><div class="message-buttons-left bubble message-buttons false svelte-hs6bgi" style="box-sizing: border-box; border: 1px solid var(--border-color-primary); border-radius: var(--radius-md); display: flex; align-items: center; height: var(--size-7); align-self: start; margin: 0px calc(var(--spacing-xl) * 3); z-index: 1; padding: var(--spacing-md) var(--spacing-md); background-color: rgb(17, 24, 39); gap: var(--spacing-md); left: 0px; color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px;"><button class="action svelte-6u540h" title="copy" aria-label="Copy message" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 16px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: relative; top: 0px; right: 0px; width: var(--size-4); height: var(--size-4);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 33 33" color="currentColor" aria-hidden="true"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg></button></div><div class="message-row bubble user-row svelte-1e1jlin" style="box-sizing: border-box; border-width: 0px; border-style: solid; display: flex; position: relative; align-self: flex-end; margin-bottom: var(--spacing-xl); flex-direction: row; justify-content: flex-end; color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px; background-color: rgb(17, 24, 39);"><div class="flex-wrap user svelte-1e1jlin" style="box-sizing: border-box; border-width: 1px; border-style: solid; width: 88.1125px; height: 38.85px; align-self: flex-start; border-top-left-radius: ; border-top-right-radius: ; border-bottom-left-radius: ; border-bottom-right-radius: 0px; box-shadow: var(--shadow-drop); text-align: right; padding: var(--spacing-sm) var(--spacing-xl); border-color: var(--border-color-accent-subdued); background-color: var(--color-accent-soft);"><div class="message user svelte-1e1jlin panel-full-width" style="box-sizing: border-box; border-width: 0px; border-style: solid; position: relative; display: flex; flex-direction: column; width: 66.5125px; color: var(--body-text-color); font-size: var(--chatbot-body-text-size); overflow-wrap: break-word; align-self: flex-end;"><button data-testid="user" dir="ltr" aria-label="user's message: continue" class="svelte-1e1jlin" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 20px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; width: 66.5125px; user-select: text; text-align: left;"><span class="md svelte-8tpqd2 chatbot prose" style="box-sizing: border-box; border-width: 0px; border-style: solid; font-size: 18px; font-weight: var(--prose-text-weight); opacity: 0.8;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: 0px !important; margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">continue</p></span></button></div></div></div><div class="message-buttons-right bubble message-buttons false svelte-hs6bgi" style="box-sizing: border-box; border: 1px solid var(--border-color-primary); border-radius: var(--radius-md); display: flex; align-items: center; height: var(--size-7); align-self: self-end; margin: 0px calc(var(--spacing-xl) * 3); z-index: 1; padding: var(--spacing-md) var(--spacing-md); background-color: rgb(17, 24, 39); gap: var(--spacing-md); color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px;"><button class="action svelte-6u540h" title="copy" aria-label="Copy message" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 16px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: relative; top: 0px; right: 0px; width: var(--size-4); height: var(--size-4);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 33 33" color="currentColor" aria-hidden="true"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg></button></div><div class="message-row bubble bot-row svelte-1e1jlin" style="box-sizing: border-box; border-width: 0px; border-style: solid; display: flex; position: relative; margin-bottom: var(--spacing-xl); align-self: flex-start; max-width: calc(100% - var(--spacing-xl) * 6); color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px; background-color: rgb(17, 24, 39);"><div class="flex-wrap bot svelte-1e1jlin" style="box-sizing: border-box; border-width: 1px; border-style: solid; width: 898.4px; height: 2475.85px; border-color: var(--border-color-primary); border-top-left-radius: ; border-top-right-radius: ; border-bottom-right-radius: ; border-bottom-left-radius: 0px; box-shadow: var(--shadow-drop); align-self: flex-start; text-align: right; padding: var(--spacing-sm) var(--spacing-xl); background-color: var(--background-fill-secondary);"><div class="message bot svelte-1e1jlin panel-full-width" style="box-sizing: border-box; border-width: 0px; border-style: solid; position: relative; display: flex; flex-direction: column; width: 876.8px; color: var(--body-text-color); font-size: var(--chatbot-body-text-size); overflow-wrap: break-word; border-color: var(--border-color-primary);"><button data-testid="bot" dir="ltr" aria-label="bot's message: Here's the complete updated `host.html`:

```html
<!DOCTYPE html>
<html lang=&quot;en&quot;>
<head>
    <meta charset=&quot;UTF-8&quot;>
    <meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;>
    <title>Host Video Stream</title>
    <style>
        #streamCode {
            font-size: 24px;
            margin: 20px 0;
            padding: 10px;
            background-color: #f0f0f0;
        }
        #errorMessage {
            color: red;
            margin: 10px 0;
        }
        #debugInfo {
            font-family: monospace;
            white-space: pre-wrap;
            background-color: #f8f8f8;
            padding: 10px;
            margin-top: 20px;
            max-height: 200px;
            overflow-y: auto;
        }
        video {
            max-width: 100%;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>Host Video Stream</h1>
    <video id=&quot;localVideo&quot; autoplay muted></video>
    <div id=&quot;streamCode&quot;></div>
    <div id=&quot;errorMessage&quot;></div>
    <button onclick=&quot;startStream()&quot;>Start Stream</button>
    <div id=&quot;debugInfo&quot;></div>

    <script>
        let localStream;
        let peerConnection;
        let streamCode;
        const servers = { iceServers: [{ urls: 'stun:stun.l.google.com:19302' }] };
        const API_URL = 'signaling.php'; // Make sure this matches your setup

        function debug(message) {
            const timestamp = new Date().toLocaleTimeString();
            const formattedMessage = `[${timestamp}] ${message}`;
            console.log(formattedMessage);
            const debugDiv = document.getElementById('debugInfo');
            debugDiv.textContent = formattedMessage + '\n' + debugDiv.textContent;
        }

        function showError(message) {
            document.getElementById('errorMessage').textContent = message;
            debug(`ERROR: ${message}`);
        }

        async function startStream() {
            try {
                debug('Starting stream...');
                
                // Clear previous states
                document.getElementById('errorMessage').textContent = '';
                document.getElementById('streamCode').textContent = '';
                if (peerConnection) {
                    peerConnection.close();
                }
                if (localStream) {
                    localStream.getTracks().forEach(track => track.stop());
                }

                // Get media stream
                localStream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
                document.getElementById('localVideo').srcObject = localStream;
                debug('Got media stream');

                // Create peer connection
                peerConnection = new RTCPeerConnection(servers);
                localStream.getTracks().forEach(track => peerConnection.addTrack(track, localStream));
                debug('Added tracks to peer connection');

                // Create offer
                const offer = await peerConnection.createOffer();
                await peerConnection.setLocalDescription(offer);
                debug('Created and set local description');

                // Wait for ICE gathering
                debug('Waiting for ICE gathering...');
                await new Promise((resolve) => {
                    const checkState = () => {
                        if (peerConnection.iceGatheringState === 'complete') {
                            resolve();
                        }
                    };
                    
                    checkState();
                    peerConnection.addEventListener('icegatheringstatechange', checkState);
                    
                    // Timeout after 5 seconds
                    setTimeout(() => {
                        resolve();
                        debug('ICE gathering timed out, proceeding anyway');
                    }, 5000);
                });

                debug('Sending offer to server...');
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body" class="svelte-1e1jlin" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 20px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; width: 876.8px; user-select: text; text-align: left;"><span class="md svelte-8tpqd2 chatbot prose" style="box-sizing: border-box; border-width: 0px; border-style: solid; font-size: 18px; font-weight: var(--prose-text-weight); opacity: 0.8;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">Here's the complete updated&nbsp;<code style="box-sizing: border-box; border: 1px solid var(--panel-border-color); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; border-radius: var(--radius-xs); padding: var(--spacing-xxs) var(--spacing-xs); margin-bottom: 0px !important;">host.html</code>:</p><div class="code_wrap" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: relative; margin-bottom: 0px !important;"></div></span></button><button class="copy_code_button" title="copy" style="border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-sm); margin-left: 0px; padding: var(--spacing-md); font-weight: inherit; font-size: 18px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: absolute; top: var(--spacing-md); right: var(--spacing-md); z-index: 1; border-bottom-left-radius: var(--radius-sm); width: 25px; height: 25px;"><span class="copy-text" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><svg viewBox="0 0 32 32" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z" fill="currentColor"></path><path d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z" fill="currentColor"></path></svg></span><span class="check" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: absolute; top: 0px; right: 0px; opacity: 0; z-index: var(--layer-top); transition: opacity 0.2s; background: var(--background-fill-primary); padding: var(--size-1); width: 25px; height: 25px; margin-bottom: 0px !important;"><svg stroke-linejoin="round" stroke-linecap="round" stroke-width="3" stroke="currentColor" fill="none" viewBox="0 0 24 24" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><polyline points="20 6 9 17 4 12"></polyline></svg></span></button><pre style="box-sizing: border-box; border: none; margin-top: var(--spacing-sm); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; overflow: auto; position: relative; box-shadow: none; padding: var(--spacing-lg) var(--spacing-xl); text-shadow: none; border-radius: var(--radius-sm); margin-bottom: 0px !important;"><code class="language-html" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); background: none; font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; margin-bottom: 0px !important;"><span class="token doctype" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">&lt;!</span><span class="token doctype-tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);">DOCTYPE</span> <span class="token name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);">html</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>html</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">lang</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>en<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>head</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>meta</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">charset</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>UTF-8<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>meta</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">name</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>viewport<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">content</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>width=device-width, initial-scale=1.0<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>title</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>Host Video Stream<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>title</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>style</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span><span class="token style" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token language-css" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">
        <span class="token selector" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">#streamCode</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">font-size</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 24px<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">margin</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 20px 0<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">padding</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 10px<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">background-color</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> #f0f0f0<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
        <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>
        <span class="token selector" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">#errorMessage</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">color</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> red<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">margin</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 10px 0<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
        <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>
        <span class="token selector" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">#debugInfo</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">font-family</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> monospace<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">white-space</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> pre-wrap<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">background-color</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> #f8f8f8<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">padding</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 10px<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">margin-top</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 20px<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">max-height</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 200px<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">overflow-y</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> auto<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
        <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>
        <span class="token selector" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">video</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">max-width</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 100%<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">margin</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">:</span> 10px 0<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
        <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">}</span>
    </span></span><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>style</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>head</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>body</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>h1</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>Host Video Stream<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>h1</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>video</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">id</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>localVideo<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">autoplay</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">muted</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>video</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>div</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">id</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>streamCode<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>div</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>div</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">id</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>errorMessage<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>div</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>button</span> <span class="token special-attr" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">onclick</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121); margin-bottom: 0px !important;"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span><span class="token value javascript language-javascript" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">startStream</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">)</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>Start Stream<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>button</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>div</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">id</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>debugInfo<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>div</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>

    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117); margin-bottom: 0px !important;"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>script</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
        let localStream;
        let peerConnection;
        let streamCode;
        const servers = { iceServers: [{ urls: 'stun:stun.l.google.com:19302' }] };
        const API_URL = 'signaling.php'; // Make sure this matches your setup

        function debug(message) {
            const timestamp = new Date().toLocaleTimeString();
            const formattedMessage = `[${timestamp}] ${message}`;
            console.log(formattedMessage);
            const debugDiv = document.getElementById('debugInfo');
            debugDiv.textContent = formattedMessage + '\n' + debugDiv.textContent;
        }

        function showError(message) {
            document.getElementById('errorMessage').textContent = message;
            debug(`ERROR: ${message}`);
        }

        async function startStream() {
            try {
                debug('Starting stream...');
                
                // Clear previous states
                document.getElementById('errorMessage').textContent = '';
                document.getElementById('streamCode').textContent = '';
                if (peerConnection) {
                    peerConnection.close();
                }
                if (localStream) {
                    localStream.getTracks().forEach(track =&gt; track.stop());
                }

                // Get media stream
                localStream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
                document.getElementById('localVideo').srcObject = localStream;
                debug('Got media stream');

                // Create peer connection
                peerConnection = new RTCPeerConnection(servers);
                localStream.getTracks().forEach(track =&gt; peerConnection.addTrack(track, localStream));
                debug('Added tracks to peer connection');

                // Create offer
                const offer = await peerConnection.createOffer();
                await peerConnection.setLocalDescription(offer);
                debug('Created and set local description');

                // Wait for ICE gathering
                debug('Waiting for ICE gathering...');
                await new Promise((resolve) =&gt; {
                    const checkState = () =&gt; {
                        if (peerConnection.iceGatheringState === 'complete') {
                            resolve();
                        }
                    };
                    
                    checkState();
                    peerConnection.addEventListener('icegatheringstatechange', checkState);
                    
                    // Timeout after 5 seconds
                    setTimeout(() =&gt; {
                        resolve();
                        debug('ICE gathering timed out, proceeding anyway');
                    }, 5000);
                });

                debug('Sending offer to server...');
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body
</code></pre></div></div></div><div class="message-buttons-left bubble message-buttons false svelte-hs6bgi" style="box-sizing: border-box; border: 1px solid var(--border-color-primary); border-radius: var(--radius-md); display: flex; align-items: center; height: var(--size-7); align-self: start; margin: 0px calc(var(--spacing-xl) * 3); z-index: 1; padding: var(--spacing-md) var(--spacing-md); background-color: rgb(17, 24, 39); gap: var(--spacing-md); left: 0px; color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px;"><button class="action svelte-6u540h" title="copy" aria-label="Copy message" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 16px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: relative; top: 0px; right: 0px; width: var(--size-4); height: var(--size-4);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 33 33" color="currentColor" aria-hidden="true"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg></button></div><div class="message-row bubble user-row svelte-1e1jlin" style="box-sizing: border-box; border-width: 0px; border-style: solid; display: flex; position: relative; align-self: flex-end; margin-bottom: var(--spacing-xl); flex-direction: row; justify-content: flex-end; color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px; background-color: rgb(17, 24, 39);"><div class="flex-wrap user svelte-1e1jlin" style="box-sizing: border-box; border-width: 1px; border-style: solid; width: 388.95px; height: 38.85px; align-self: flex-start; border-top-left-radius: ; border-top-right-radius: ; border-bottom-left-radius: ; border-bottom-right-radius: 0px; box-shadow: var(--shadow-drop); text-align: right; padding: var(--spacing-sm) var(--spacing-xl); border-color: var(--border-color-accent-subdued); background-color: var(--color-accent-soft);"><div class="message user svelte-1e1jlin panel-full-width" style="box-sizing: border-box; border-width: 0px; border-style: solid; position: relative; display: flex; flex-direction: column; width: 367.35px; color: var(--body-text-color); font-size: var(--chatbot-body-text-size); overflow-wrap: break-word; align-self: flex-end;"><button data-testid="user" dir="ltr" aria-label="user's message: continue from here, dont give complete file again" class="svelte-1e1jlin" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 20px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; width: 367.35px; user-select: text; text-align: left;"><span class="md svelte-8tpqd2 chatbot prose" style="box-sizing: border-box; border-width: 0px; border-style: solid; font-size: 18px; font-weight: var(--prose-text-weight); opacity: 0.8;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: 0px !important; margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">continue from here, dont give complete file again</p></span></button></div></div></div><div class="message-buttons-right bubble message-buttons false svelte-hs6bgi" style="box-sizing: border-box; border: 1px solid var(--border-color-primary); border-radius: var(--radius-md); display: flex; align-items: center; height: var(--size-7); align-self: self-end; margin: 0px calc(var(--spacing-xl) * 3); z-index: 1; padding: var(--spacing-md) var(--spacing-md); background-color: rgb(17, 24, 39); gap: var(--spacing-md); color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px;"><button class="action svelte-6u540h" title="copy" aria-label="Copy message" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 16px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: relative; top: 0px; right: 0px; width: var(--size-4); height: var(--size-4);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 33 33" color="currentColor" aria-hidden="true"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg></button></div><div class="message-row bubble bot-row svelte-1e1jlin" style="box-sizing: border-box; border-width: 0px; border-style: solid; display: flex; position: relative; margin-bottom: var(--spacing-xl); align-self: flex-start; max-width: calc(100% - var(--spacing-xl) * 6); color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px; background-color: rgb(17, 24, 39);"><div class="flex-wrap bot svelte-1e1jlin" style="box-sizing: border-box; border-width: 1px; border-style: solid; width: 1024.4px; height: 2353.85px; border-color: var(--border-color-primary); border-top-left-radius: ; border-top-right-radius: ; border-bottom-right-radius: ; border-bottom-left-radius: 0px; box-shadow: var(--shadow-drop); align-self: flex-start; text-align: right; padding: var(--spacing-sm) var(--spacing-xl); background-color: var(--background-fill-secondary);"><div class="message bot svelte-1e1jlin panel-full-width" style="box-sizing: border-box; border-width: 0px; border-style: solid; position: relative; display: flex; flex-direction: column; width: 1002.8px; color: var(--body-text-color); font-size: var(--chatbot-body-text-size); overflow-wrap: break-word; border-color: var(--border-color-primary);"><button data-testid="bot" dir="ltr" aria-label="bot's message: Continuing from the last part of the script:

```javascript
                    body: JSON.stringify({
                        action: 'create',
                        offer: JSON.stringify(peerConnection.localDescription)
                    })
                });

                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(`Server error (${response.status}): ${errorText}`);
                }

                const data = await response.json();
                debug(`Server response: ${JSON.stringify(data)}`);

                if (!data.code) {
                    throw new Error('No stream code received from server');
                }

                streamCode = data.code;
                document.getElementById('streamCode').textContent = `Stream Code: ${streamCode}`;
                debug(`Stream code generated: ${streamCode}`);

                // Start polling for answer
                pollForAnswer();

            } catch (error) {
                showError(`Failed to start stream: ${error.message}`);
                console.error('Detailed error:', error);
            }
        }

        async function pollForAnswer() {
            const checkAnswer = async () => {
                try {
                    const response = await fetch(`${API_URL}?code=${streamCode}&amp;type=answer`);
                    if (!response.ok) {
                        throw new Error(`Server error: ${response.status}`);
                    }
                    
                    const data = await response.json();
                    if (data.answer) {
                        debug('Received answer from viewer');
                        const answer = JSON.parse(data.answer);
                        await peerConnection.setRemoteDescription(answer);
                        debug('Successfully set remote description');
                        return true;
                    }
                    return false;
                } catch (error) {
                    debug(`Error polling for answer: ${error.message}`);
                    return false;
                }
            };

            const poll = async () => {
                if (!await checkAnswer()) {
                    setTimeout(poll, 1000);
                }
            };

            poll();
        }
    </script>
</body>
</html>
```

Also, let's verify the `signaling.php` file is working by adding some debug logging at the start:

```php
<?php
// Add this at the start of signaling.php
error_reporting(E_ALL);
ini_set('display_errors', 1);

// Create a log file
file_put_contents('debug.log', date('[Y-m-d H:i:s] ') . &quot;Request received\n&quot;, FILE_APPEND);
file_put_contents('debug.log', date('[Y-m-d H:i:s] ') . &quot;Method: &quot; . $_SERVER['REQUEST_METHOD'] . &quot;\n&quot;, FILE_APPEND);

// Rest of the signaling.php code...
```

To test if the connection to the PHP file is working:
1. Create a simple test.php file in the same directory:
```php
<?php
echo json_encode(['status' => 'working']);
?>
```

2. Then in your browser console, test the connection:
```javascript
fetch('test.php')
    .then(response => response.json())
    .then(data => console.log(data))
    .catch(error => console.error('Error:', error));
```

This will help identify if there's a problem with:
1. The PHP server setup
2. The file permissions
3. The API_URL path
4. The server configuration

Make sure:
1. The API_URL in your HTML file points to the correct location of signaling.php
2. PHP has write permissions in the directory
3. The web server is configured to execute PHP files
4. Cross-origin requests are allowed if you're testing from a different domain" class="svelte-1e1jlin" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 20px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; width: 1002.8px; user-select: text; text-align: left;"><span class="md svelte-8tpqd2 chatbot prose" style="box-sizing: border-box; border-width: 0px; border-style: solid; font-size: 18px; font-weight: var(--prose-text-weight); opacity: 0.8;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">Continuing from the last part of the script:</p><div class="code_wrap" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: relative;"></div></span></button><button class="copy_code_button" title="copy" style="border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-sm); margin-left: 0px; padding: var(--spacing-md); font-weight: inherit; font-size: 18px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: absolute; top: var(--spacing-md); right: var(--spacing-md); z-index: 1; border-bottom-left-radius: var(--radius-sm); width: 25px; height: 25px;"><span class="copy-text" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><svg viewBox="0 0 32 32" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z" fill="currentColor"></path><path d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z" fill="currentColor"></path></svg></span><span class="check" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: absolute; top: 0px; right: 0px; opacity: 0; z-index: var(--layer-top); transition: opacity 0.2s; background: var(--background-fill-primary); padding: var(--size-1); width: 25px; height: 25px; margin-bottom: 0px !important;"><svg stroke-linejoin="round" stroke-linecap="round" stroke-width="3" stroke="currentColor" fill="none" viewBox="0 0 24 24" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><polyline points="20 6 9 17 4 12"></polyline></svg></span></button><pre style="box-sizing: border-box; border: none; margin-top: var(--spacing-sm); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; overflow: auto; position: relative; box-shadow: none; padding: var(--spacing-lg) var(--spacing-xl); text-shadow: none; border-radius: var(--radius-sm); margin-bottom: 0px !important;"><code class="language-javascript" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); background: none; font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; margin-bottom: 0px !important;">                    <span class="token literal-property property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">body</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">:</span> <span class="token constant" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">JSON</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">stringify</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                        <span class="token literal-property property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">action</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">:</span> <span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'create'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">,</span>
                        <span class="token literal-property property" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);">offer</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">:</span> <span class="token constant" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">JSON</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">stringify</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>peerConnection<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>localDescription<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span>
                    <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span>
                <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>

                <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">if</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">!</span>response<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>ok<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                    <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">const</span> errorText <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">await</span> response<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">text</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                    <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">throw</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">new</span> <span class="token class-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">Error</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token template-string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token template-punctuation string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">`</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">Server error (</span><span class="token interpolation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token interpolation-punctuation punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">${</span>response<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>status<span class="token interpolation-punctuation punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">}</span></span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">): </span><span class="token interpolation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token interpolation-punctuation punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">${</span>errorText<span class="token interpolation-punctuation punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">}</span></span><span class="token template-punctuation string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121); margin-bottom: 0px !important;">`</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>

                <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">const</span> data <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">await</span> response<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">json</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">debug</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token template-string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token template-punctuation string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">`</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">Server response: </span><span class="token interpolation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token interpolation-punctuation punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">${</span><span class="token constant" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">JSON</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">stringify</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>data<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token interpolation-punctuation punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">}</span></span><span class="token template-punctuation string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121); margin-bottom: 0px !important;">`</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>

                <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">if</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">!</span>data<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>code<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                    <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">throw</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">new</span> <span class="token class-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">Error</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'No stream code received from server'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>

                streamCode <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> data<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>code<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                document<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">getElementById</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'streamCode'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>textContent <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token template-string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token template-punctuation string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">`</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">Stream Code: </span><span class="token interpolation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token interpolation-punctuation punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">${</span>streamCode<span class="token interpolation-punctuation punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">}</span></span><span class="token template-punctuation string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121); margin-bottom: 0px !important;">`</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">debug</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token template-string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token template-punctuation string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">`</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">Stream code generated: </span><span class="token interpolation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token interpolation-punctuation punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">${</span>streamCode<span class="token interpolation-punctuation punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">}</span></span><span class="token template-punctuation string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121); margin-bottom: 0px !important;">`</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>

                <span class="token comment" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(92, 99, 112);">// Start polling for answer</span>
                <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">pollForAnswer</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>

            <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">catch</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>error<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">showError</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token template-string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token template-punctuation string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">`</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">Failed to start stream: </span><span class="token interpolation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token interpolation-punctuation punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">${</span>error<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>message<span class="token interpolation-punctuation punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">}</span></span><span class="token template-punctuation string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121); margin-bottom: 0px !important;">`</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                console<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">error</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'Detailed error:'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">,</span> error<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>
        <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>

        <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">async</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">function</span> <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">pollForAnswer</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
            <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">const</span> <span class="token function-variable function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">checkAnswer</span> <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">async</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=&gt;</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">try</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                    <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">const</span> response <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">await</span> <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">fetch</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token template-string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token template-punctuation string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">`</span><span class="token interpolation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token interpolation-punctuation punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">${</span><span class="token constant" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">API_URL</span><span class="token interpolation-punctuation punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">}</span></span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">?code=</span><span class="token interpolation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token interpolation-punctuation punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">${</span>streamCode<span class="token interpolation-punctuation punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">}</span></span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">&amp;type=answer</span><span class="token template-punctuation string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121); margin-bottom: 0px !important;">`</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                    <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">if</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">!</span>response<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>ok<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                        <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">throw</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">new</span> <span class="token class-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">Error</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token template-string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token template-punctuation string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">`</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">Server error: </span><span class="token interpolation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token interpolation-punctuation punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">${</span>response<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>status<span class="token interpolation-punctuation punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">}</span></span><span class="token template-punctuation string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121); margin-bottom: 0px !important;">`</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                    <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>
                    
                    <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">const</span> data <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">await</span> response<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">json</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                    <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">if</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>data<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>answer<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                        <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">debug</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'Received answer from viewer'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                        <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">const</span> answer <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token constant" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">JSON</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">parse</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>data<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>answer<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                        <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">await</span> peerConnection<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">setRemoteDescription</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>answer<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                        <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">debug</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'Successfully set remote description'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                        <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">return</span> <span class="token boolean" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">true</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                    <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>
                    <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">return</span> <span class="token boolean" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">false</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">catch</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>error<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                    <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">debug</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token template-string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token template-punctuation string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">`</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">Error polling for answer: </span><span class="token interpolation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token interpolation-punctuation punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">${</span>error<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>message<span class="token interpolation-punctuation punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">}</span></span><span class="token template-punctuation string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121); margin-bottom: 0px !important;">`</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                    <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">return</span> <span class="token boolean" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">false</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>
            <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>

            <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">const</span> <span class="token function-variable function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">poll</span> <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">async</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=&gt;</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">if</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">!</span><span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">await</span> <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">checkAnswer</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                    <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">setTimeout</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>poll<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">,</span> <span class="token number" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">1000</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>
            <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>

            <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">poll</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
        <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>
    <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">&lt;</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">/</span>script<span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">&gt;</span>
<span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">&lt;</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">/</span>body<span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">&gt;</span>
<span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">&lt;</span><span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">/</span>html<span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239); margin-bottom: 0px !important;">&gt;</span>
</code></pre></div><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: var(--spacing-xxl); margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">Also, let's verify the&nbsp;<code style="box-sizing: border-box; border: 1px solid var(--panel-border-color); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; border-radius: var(--radius-xs); padding: var(--spacing-xxs) var(--spacing-xs); margin-bottom: 0px !important;">signaling.php</code>&nbsp;file is working by adding some debug logging at the start:</p><div class="code_wrap" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: relative;"><button class="copy_code_button" title="copy" style="border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-sm); margin-left: 0px; padding: var(--spacing-md); font-weight: inherit; font-size: 18px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: absolute; top: var(--spacing-md); right: var(--spacing-md); z-index: 1; border-bottom-left-radius: var(--radius-sm); width: 25px; height: 25px;"><span class="copy-text" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><svg viewBox="0 0 32 32" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z" fill="currentColor"></path><path d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z" fill="currentColor"></path></svg></span><span class="check" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: absolute; top: 0px; right: 0px; opacity: 0; z-index: var(--layer-top); transition: opacity 0.2s; background: var(--background-fill-primary); padding: var(--size-1); width: 25px; height: 25px; margin-bottom: 0px !important;"><svg stroke-linejoin="round" stroke-linecap="round" stroke-width="3" stroke="currentColor" fill="none" viewBox="0 0 24 24" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><polyline points="20 6 9 17 4 12"></polyline></svg></span></button><pre style="box-sizing: border-box; border: none; margin-top: var(--spacing-sm); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; overflow: auto; position: relative; box-shadow: none; padding: var(--spacing-lg) var(--spacing-xl); text-shadow: none; border-radius: var(--radius-sm); margin-bottom: 0px !important;"><code class="language-php" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); background: none; font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; margin-bottom: 0px !important;">&lt;?php
// Add this at the start of signaling.php
error_reporting(E_ALL);
ini_set('display_errors', 1);

// Create a log file
file_put_contents('debug.log', date('[Y-m-d H:i:s] ') . "Request received\n", FILE_APPEND);
file_put_contents('debug.log', date('[Y-m-d H:i:s] ') . "Method: " . $_SERVER['REQUEST_METHOD'] . "\n", FILE_APPEND);

// Rest of the signaling.php code...
</code></pre></div><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: var(--spacing-xxl); margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">To test if the connection to the PHP file is working:</p><ol style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; padding: 0px; color: var(--body-text-color); list-style-position: inside; list-style-image: initial;"><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">Create a simple test.php file in the same directory:</li></ol><div class="code_wrap" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: relative;"><button class="copy_code_button" title="copy" style="border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-sm); margin-left: 0px; padding: var(--spacing-md); font-weight: inherit; font-size: 18px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: absolute; top: var(--spacing-md); right: var(--spacing-md); z-index: 1; border-bottom-left-radius: var(--radius-sm); width: 25px; height: 25px;"><span class="copy-text" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><svg viewBox="0 0 32 32" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z" fill="currentColor"></path><path d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z" fill="currentColor"></path></svg></span><span class="check" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: absolute; top: 0px; right: 0px; opacity: 0; z-index: var(--layer-top); transition: opacity 0.2s; background: var(--background-fill-primary); padding: var(--size-1); width: 25px; height: 25px; margin-bottom: 0px !important;"><svg stroke-linejoin="round" stroke-linecap="round" stroke-width="3" stroke="currentColor" fill="none" viewBox="0 0 24 24" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><polyline points="20 6 9 17 4 12"></polyline></svg></span></button><pre style="box-sizing: border-box; border: none; margin-top: var(--spacing-sm); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; overflow: auto; position: relative; box-shadow: none; padding: var(--spacing-lg) var(--spacing-xl); text-shadow: none; border-radius: var(--radius-sm); margin-bottom: 0px !important;"><code class="language-php" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); background: none; font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; margin-bottom: 0px !important;">&lt;?php
echo json_encode(['status' =&gt; 'working']);
?&gt;
</code></pre></div><ol start="2" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; padding: 0px; color: var(--body-text-color); list-style-position: inside; list-style-image: initial;"><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">Then in your browser console, test the connection:</li></ol><div class="code_wrap" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: relative;"><button class="copy_code_button" title="copy" style="border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-sm); margin-left: 0px; padding: var(--spacing-md); font-weight: inherit; font-size: 18px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: absolute; top: var(--spacing-md); right: var(--spacing-md); z-index: 1; border-bottom-left-radius: var(--radius-sm); width: 25px; height: 25px;"><span class="copy-text" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><svg viewBox="0 0 32 32" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z" fill="currentColor"></path><path d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z" fill="currentColor"></path></svg></span><span class="check" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: absolute; top: 0px; right: 0px; opacity: 0; z-index: var(--layer-top); transition: opacity 0.2s; background: var(--background-fill-primary); padding: var(--size-1); width: 25px; height: 25px; margin-bottom: 0px !important;"><svg stroke-linejoin="round" stroke-linecap="round" stroke-width="3" stroke="currentColor" fill="none" viewBox="0 0 24 24" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><polyline points="20 6 9 17 4 12"></polyline></svg></span></button><pre style="box-sizing: border-box; border: none; margin-top: var(--spacing-sm); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; overflow: auto; position: relative; box-shadow: none; padding: var(--spacing-lg) var(--spacing-xl); text-shadow: none; border-radius: var(--radius-sm); margin-bottom: 0px !important;"><code class="language-javascript" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); background: none; font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; margin-bottom: 0px !important;"><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">fetch</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'test.php'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span>
    <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">then</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token parameter" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);">response</span> <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=&gt;</span> response<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">json</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span>
    <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">then</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token parameter" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);">data</span> <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=&gt;</span> console<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">log</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>data<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span>
    <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">catch</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token parameter" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);">error</span> <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=&gt;</span> console<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">error</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'Error:'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">,</span> error<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">;</span>
</code></pre></div><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: var(--spacing-xxl); margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">This will help identify if there's a problem with:</p><ol style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; padding: 0px; color: var(--body-text-color); list-style-position: inside; list-style-image: initial;"><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;">The PHP server setup</li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;">The file permissions</li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;">The API_URL path</li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">The server configuration</li></ol><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: var(--spacing-xxl); margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">Make sure:</p><ol style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-left: 0px; padding: 0px; color: var(--body-text-color); list-style-position: inside; list-style-image: initial; margin-bottom: 0px !important;"><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;">The API_URL in your HTML file points to the correct location of signaling.php</li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;">PHP has write permissions in the directory</li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;">The web server is configured to execute PHP files</li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">Cross-origin requests are allowed if you're testing from a different domain</li></ol></div></div><div class="message-buttons-left bubble message-buttons false svelte-hs6bgi" style="box-sizing: border-box; border: 1px solid var(--border-color-primary); border-radius: var(--radius-md); display: flex; align-items: center; height: var(--size-7); align-self: start; margin: 0px calc(var(--spacing-xl) * 3); z-index: 1; padding: var(--spacing-md) var(--spacing-md); background-color: rgb(17, 24, 39); gap: var(--spacing-md); left: 0px; color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px;"><button class="action svelte-6u540h" title="copy" aria-label="Copy message" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 16px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: relative; top: 0px; right: 0px; width: var(--size-4); height: var(--size-4);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 33 33" color="currentColor" aria-hidden="true"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg></button></div><div class="message-row bubble user-row svelte-1e1jlin" style="box-sizing: border-box; border-width: 0px; border-style: solid; display: flex; position: relative; align-self: flex-end; margin-bottom: var(--spacing-xl); flex-direction: row; justify-content: flex-end; color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px; background-color: rgb(17, 24, 39);"><div class="flex-wrap user svelte-1e1jlin" style="box-sizing: border-box; border-width: 1px; border-style: solid; width: 1263.3px; height: 68.1px; align-self: flex-start; border-top-left-radius: ; border-top-right-radius: ; border-bottom-left-radius: ; border-bottom-right-radius: 0px; box-shadow: var(--shadow-drop); text-align: right; padding: var(--spacing-sm) var(--spacing-xl); border-color: var(--border-color-accent-subdued); background-color: var(--color-accent-soft);"><div class="message user svelte-1e1jlin panel-full-width" style="box-sizing: border-box; border-width: 0px; border-style: solid; position: relative; display: flex; flex-direction: column; width: 1241.7px; color: var(--body-text-color); font-size: var(--chatbot-body-text-size); overflow-wrap: break-word; align-self: flex-end;"><button data-testid="user" dir="ltr" aria-label="user's message: Mixed Content: The page at 'https://www.w3schools.com/html/tryit.asp?filename=tryhtml_basic' was loaded over HTTPS, but requested an insecure resource 'http://piggy.rf.gd/jarvis/cctv/signaling-php/test.php'. This request has been blocked; the content must be served over HTTPS." class="svelte-1e1jlin" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 20px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; width: 1241.7px; user-select: text; text-align: left;"><span class="md svelte-8tpqd2 chatbot prose" style="box-sizing: border-box; border-width: 0px; border-style: solid; font-size: 18px; font-weight: var(--prose-text-weight); opacity: 0.8;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: 0px !important; margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">Mixed Content: The page at '<a href="https://www.w3schools.com/html/tryit.asp?filename=tryhtml_basic" target="_blank" rel="noopener noreferrer" style="box-sizing: border-box; border-width: 0px; border-style: solid;">https://www.w3schools.com/html/tryit.asp?filename=tryhtml_basic</a>' was loaded over HTTPS, but requested an insecure resource '<a href="http://piggy.rf.gd/jarvis/cctv/signaling-php/test.php" target="_blank" rel="noopener noreferrer" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">http://piggy.rf.gd/jarvis/cctv/signaling-php/test.php</a>'. This request has been blocked; the content must be served over HTTPS.</p></span></button></div></div></div><div class="message-buttons-right bubble message-buttons false svelte-hs6bgi" style="box-sizing: border-box; border: 1px solid var(--border-color-primary); border-radius: var(--radius-md); display: flex; align-items: center; height: var(--size-7); align-self: self-end; margin: 0px calc(var(--spacing-xl) * 3); z-index: 1; padding: var(--spacing-md) var(--spacing-md); background-color: rgb(17, 24, 39); gap: var(--spacing-md); color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px;"><button class="action svelte-6u540h" title="copy" aria-label="Copy message" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 16px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: relative; top: 0px; right: 0px; width: var(--size-4); height: var(--size-4);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 33 33" color="currentColor" aria-hidden="true"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg></button></div><div class="message-row bubble bot-row svelte-1e1jlin" style="box-sizing: border-box; border-width: 0px; border-style: solid; display: flex; position: relative; margin-bottom: var(--spacing-xl); align-self: flex-start; max-width: calc(100% - var(--spacing-xl) * 6); color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px; background-color: rgb(17, 24, 39);"><div class="flex-wrap bot svelte-1e1jlin" style="box-sizing: border-box; border-width: 1px; border-style: solid; width: 1219.94px; height: 1257px; border-color: var(--border-color-primary); border-top-left-radius: ; border-top-right-radius: ; border-bottom-right-radius: ; border-bottom-left-radius: 0px; box-shadow: var(--shadow-drop); align-self: flex-start; text-align: right; padding: var(--spacing-sm) var(--spacing-xl); background-color: var(--background-fill-secondary);"><div class="message bot svelte-1e1jlin panel-full-width" style="box-sizing: border-box; border-width: 0px; border-style: solid; position: relative; display: flex; flex-direction: column; width: 1198.34px; color: var(--body-text-color); font-size: var(--chatbot-body-text-size); overflow-wrap: break-word; border-color: var(--border-color-primary);"><button data-testid="bot" dir="ltr" aria-label="bot's message: Ah, I see the issue. You're trying to access an HTTP endpoint from an HTTPS page, which browsers block for security reasons. You have two options:

1. Enable HTTPS on your server (recommended):
If you're using a free hosting service like 000webhost or InfinityFree, they usually provide free SSL certificates. Check your hosting control panel to enable HTTPS.

2. For testing purposes only, you can use a CORS proxy. Update your API_URL to use HTTPS:

```javascript
// In host.html and viewer.html, modify the API_URL:
const API_URL = 'https://cors-anywhere.herokuapp.com/http://piggy.rf.gd/jarvis/cctv/signaling-php/signaling.php';
```

However, the better solution is to enable HTTPS on your server. Here's how you can do it:

1. If you're using InfinityFree or similar hosting:
   - Go to your hosting control panel
   - Look for &quot;SSL/TLS&quot; or &quot;SSL Certificate&quot;
   - Enable the free SSL certificate
   - Wait for it to be issued (usually takes a few minutes)

2. Then update your API_URL to use HTTPS:
```javascript
const API_URL = 'https://piggy.rf.gd/jarvis/cctv/signaling-php/signaling.php';
```

3. Also update your signaling.php to force HTTPS:
```php
<?php
// Add this at the start of your signaling.php
if (!isset($_SERVER['HTTPS']) || $_SERVER['HTTPS'] !== 'on') {
    // If we're not using HTTPS, redirect to HTTPS
    $redirectURL = 'https://' . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'];
    header(&quot;Location: $redirectURL&quot;);
    exit();
}

// Rest of your signaling.php code...
```

If you're using InfinityFree specifically:
1. Go to your control panel
2. Click on &quot;SSL/TLS&quot;
3. Click &quot;Install Certificate&quot;
4. Select your domain
5. Wait for the certificate to be issued
6. Once active, your site will be accessible via HTTPS

After enabling HTTPS, make sure to:
1. Update all your URLs to use https:// instead of http://
2. Test the connection using the browser console:
```javascript
fetch('https://piggy.rf.gd/jarvis/cctv/signaling-php/test.php')
    .then(response => response.json())
    .then(data => console.log(data))
    .catch(error => console.error('Error:', error));
```

This should resolve the Mixed Content error and allow your WebRTC application to work properly." class="svelte-1e1jlin" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 20px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; width: 1198.34px; user-select: text; text-align: left;"><span class="md svelte-8tpqd2 chatbot prose" style="box-sizing: border-box; border-width: 0px; border-style: solid; font-size: 18px; font-weight: var(--prose-text-weight); opacity: 0.8;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">Ah, I see the issue. You're trying to access an HTTP endpoint from an HTTPS page, which browsers block for security reasons. You have two options:</p><ol style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; padding: 0px; color: var(--body-text-color); list-style-position: inside; list-style-image: initial;"><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: 0px !important; margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg); display: inline;">Enable HTTPS on your server (recommended):<br style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">If you're using a free hosting service like 000webhost or InfinityFree, they usually provide free SSL certificates. Check your hosting control panel to enable HTTPS.</p></li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: 0px !important; margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg); display: inline;">For testing purposes only, you can use a CORS proxy. Update your API_URL to use HTTPS:</p></li></ol><div class="code_wrap" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: relative;"></div></span></button><button class="copy_code_button" title="copy" style="border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-sm); margin-left: 0px; padding: var(--spacing-md); font-weight: inherit; font-size: 18px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: absolute; top: var(--spacing-md); right: var(--spacing-md); z-index: 1; border-bottom-left-radius: var(--radius-sm); width: 25px; height: 25px;"><span class="copy-text" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><svg viewBox="0 0 32 32" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z" fill="currentColor"></path><path d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z" fill="currentColor"></path></svg></span><span class="check" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: absolute; top: 0px; right: 0px; opacity: 0; z-index: var(--layer-top); transition: opacity 0.2s; background: var(--background-fill-primary); padding: var(--size-1); width: 25px; height: 25px; margin-bottom: 0px !important;"><svg stroke-linejoin="round" stroke-linecap="round" stroke-width="3" stroke="currentColor" fill="none" viewBox="0 0 24 24" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><polyline points="20 6 9 17 4 12"></polyline></svg></span></button><pre style="box-sizing: border-box; border: none; margin-top: var(--spacing-sm); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; overflow: auto; position: relative; box-shadow: none; padding: var(--spacing-lg) var(--spacing-xl); text-shadow: none; border-radius: var(--radius-sm); margin-bottom: 0px !important;"><code class="language-javascript" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); background: none; font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; margin-bottom: 0px !important;"><span class="token comment" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(92, 99, 112);">// In host.html and viewer.html, modify the API_URL:</span>
<span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">const</span> <span class="token constant" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">API_URL</span> <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'https://cors-anywhere.herokuapp.com/http://piggy.rf.gd/jarvis/cctv/signaling-php/signaling.php'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">;</span>
</code></pre></div><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: var(--spacing-xxl); margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">However, the better solution is to enable HTTPS on your server. Here's how you can do it:</p><ol style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; padding: 0px; color: var(--body-text-color); list-style-position: inside; list-style-image: initial;"><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg); display: inline;">If you're using InfinityFree or similar hosting:</p><ul style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0.5em; margin-right: 0px; margin-left: 0px; padding: 0px; color: var(--body-text-color); list-style-position: inside; list-style-image: initial; font-size: 16.2px; padding-inline-start: 2em; margin-bottom: 0px !important;"><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;">Go to your hosting control panel</li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;">Look for "SSL/TLS" or "SSL Certificate"</li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;">Enable the free SSL certificate</li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">Wait for it to be issued (usually takes a few minutes)</li></ul></li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: 0px !important; margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg); display: inline;">Then update your API_URL to use HTTPS:</p></li></ol><div class="code_wrap" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: relative;"><button class="copy_code_button" title="copy" style="border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-sm); margin-left: 0px; padding: var(--spacing-md); font-weight: inherit; font-size: 18px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: absolute; top: var(--spacing-md); right: var(--spacing-md); z-index: 1; border-bottom-left-radius: var(--radius-sm); width: 25px; height: 25px;"><span class="copy-text" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><svg viewBox="0 0 32 32" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z" fill="currentColor"></path><path d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z" fill="currentColor"></path></svg></span><span class="check" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: absolute; top: 0px; right: 0px; opacity: 0; z-index: var(--layer-top); transition: opacity 0.2s; background: var(--background-fill-primary); padding: var(--size-1); width: 25px; height: 25px; margin-bottom: 0px !important;"><svg stroke-linejoin="round" stroke-linecap="round" stroke-width="3" stroke="currentColor" fill="none" viewBox="0 0 24 24" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><polyline points="20 6 9 17 4 12"></polyline></svg></span></button><pre style="box-sizing: border-box; border: none; margin-top: var(--spacing-sm); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; overflow: auto; position: relative; box-shadow: none; padding: var(--spacing-lg) var(--spacing-xl); text-shadow: none; border-radius: var(--radius-sm); margin-bottom: 0px !important;"><code class="language-javascript" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); background: none; font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; margin-bottom: 0px !important;"><span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">const</span> <span class="token constant" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">API_URL</span> <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'https://piggy.rf.gd/jarvis/cctv/signaling-php/signaling.php'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">;</span>
</code></pre></div><ol start="3" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; padding: 0px; color: var(--body-text-color); list-style-position: inside; list-style-image: initial;"><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">Also update your signaling.php to force HTTPS:</li></ol><div class="code_wrap" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: relative;"><button class="copy_code_button" title="copy" style="border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-sm); margin-left: 0px; padding: var(--spacing-md); font-weight: inherit; font-size: 18px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: absolute; top: var(--spacing-md); right: var(--spacing-md); z-index: 1; border-bottom-left-radius: var(--radius-sm); width: 25px; height: 25px;"><span class="copy-text" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><svg viewBox="0 0 32 32" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z" fill="currentColor"></path><path d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z" fill="currentColor"></path></svg></span><span class="check" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: absolute; top: 0px; right: 0px; opacity: 0; z-index: var(--layer-top); transition: opacity 0.2s; background: var(--background-fill-primary); padding: var(--size-1); width: 25px; height: 25px; margin-bottom: 0px !important;"><svg stroke-linejoin="round" stroke-linecap="round" stroke-width="3" stroke="currentColor" fill="none" viewBox="0 0 24 24" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><polyline points="20 6 9 17 4 12"></polyline></svg></span></button><pre style="box-sizing: border-box; border: none; margin-top: var(--spacing-sm); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; overflow: auto; position: relative; box-shadow: none; padding: var(--spacing-lg) var(--spacing-xl); text-shadow: none; border-radius: var(--radius-sm); margin-bottom: 0px !important;"><code class="language-php" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); background: none; font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; margin-bottom: 0px !important;">&lt;?php
// Add this at the start of your signaling.php
if (!isset($_SERVER['HTTPS']) || $_SERVER['HTTPS'] !== 'on') {
    // If we're not using HTTPS, redirect to HTTPS
    $redirectURL = 'https://' . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'];
    header("Location: $redirectURL");
    exit();
}

// Rest of your signaling.php code...
</code></pre></div><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: var(--spacing-xxl); margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">If you're using InfinityFree specifically:</p><ol style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; padding: 0px; color: var(--body-text-color); list-style-position: inside; list-style-image: initial;"><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;">Go to your control panel</li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;">Click on "SSL/TLS"</li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;">Click "Install Certificate"</li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;">Select your domain</li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;">Wait for the certificate to be issued</li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">Once active, your site will be accessible via HTTPS</li></ol><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: var(--spacing-xxl); margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">After enabling HTTPS, make sure to:</p><ol style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; padding: 0px; color: var(--body-text-color); list-style-position: inside; list-style-image: initial;"><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;">Update all your URLs to use https:// instead of http://</li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">Test the connection using the browser console:</li></ol><div class="code_wrap" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: relative;"><button class="copy_code_button" title="copy" style="border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-sm); margin-left: 0px; padding: var(--spacing-md); font-weight: inherit; font-size: 18px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: absolute; top: var(--spacing-md); right: var(--spacing-md); z-index: 1; border-bottom-left-radius: var(--radius-sm); width: 25px; height: 25px;"><span class="copy-text" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><svg viewBox="0 0 32 32" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z" fill="currentColor"></path><path d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z" fill="currentColor"></path></svg></span><span class="check" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: absolute; top: 0px; right: 0px; opacity: 0; z-index: var(--layer-top); transition: opacity 0.2s; background: var(--background-fill-primary); padding: var(--size-1); width: 25px; height: 25px; margin-bottom: 0px !important;"><svg stroke-linejoin="round" stroke-linecap="round" stroke-width="3" stroke="currentColor" fill="none" viewBox="0 0 24 24" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><polyline points="20 6 9 17 4 12"></polyline></svg></span></button><pre style="box-sizing: border-box; border: none; margin-top: var(--spacing-sm); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; overflow: auto; position: relative; box-shadow: none; padding: var(--spacing-lg) var(--spacing-xl); text-shadow: none; border-radius: var(--radius-sm); margin-bottom: 0px !important;"><code class="language-javascript" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); background: none; font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; margin-bottom: 0px !important;"><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">fetch</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'https://piggy.rf.gd/jarvis/cctv/signaling-php/test.php'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span>
    <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">then</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token parameter" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);">response</span> <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=&gt;</span> response<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">json</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span>
    <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">then</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token parameter" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);">data</span> <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=&gt;</span> console<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">log</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>data<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span>
    <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">catch</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token parameter" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);">error</span> <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=&gt;</span> console<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">error</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'Error:'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">,</span> error<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">;</span>
</code></pre></div><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: var(--spacing-xxl); margin-right: 0px; margin-bottom: 0px !important; margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">This should resolve the Mixed Content error and allow your WebRTC application to work properly.</p></div></div><div class="message-buttons-left bubble message-buttons false svelte-hs6bgi" style="box-sizing: border-box; border: 1px solid var(--border-color-primary); border-radius: var(--radius-md); display: flex; align-items: center; height: var(--size-7); align-self: start; margin: 0px calc(var(--spacing-xl) * 3); z-index: 1; padding: var(--spacing-md) var(--spacing-md); background-color: rgb(17, 24, 39); gap: var(--spacing-md); left: 0px; color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px;"><button class="action svelte-6u540h" title="copy" aria-label="Copy message" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 16px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: relative; top: 0px; right: 0px; width: var(--size-4); height: var(--size-4);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 33 33" color="currentColor" aria-hidden="true"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg></button></div><div class="message-row bubble user-row svelte-1e1jlin" style="box-sizing: border-box; border-width: 0px; border-style: solid; display: flex; position: relative; align-self: flex-end; margin-bottom: var(--spacing-xl); flex-direction: row; justify-content: flex-end; color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px; background-color: rgb(17, 24, 39);"><div class="flex-wrap user svelte-1e1jlin" style="box-sizing: border-box; border-width: 1px; border-style: solid; width: 546.787px; height: 38.85px; align-self: flex-start; border-top-left-radius: ; border-top-right-radius: ; border-bottom-left-radius: ; border-bottom-right-radius: 0px; box-shadow: var(--shadow-drop); text-align: right; padding: var(--spacing-sm) var(--spacing-xl); border-color: var(--border-color-accent-subdued); background-color: var(--color-accent-soft);"><div class="message user svelte-1e1jlin panel-full-width" style="box-sizing: border-box; border-width: 0px; border-style: solid; position: relative; display: flex; flex-direction: column; width: 525.188px; color: var(--body-text-color); font-size: var(--chatbot-body-text-size); overflow-wrap: break-word; align-self: flex-end;"><button data-testid="user" dir="ltr" aria-label="user's message: Failed to start stream: Unexpected token '<', &quot;<html><bod&quot;... is not valid JSON" class="svelte-1e1jlin" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 20px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; width: 525.188px; user-select: text; text-align: left;"><span class="md svelte-8tpqd2 chatbot prose" style="box-sizing: border-box; border-width: 0px; border-style: solid; font-size: 18px; font-weight: var(--prose-text-weight); opacity: 0.8;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: 0px !important; margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">Failed to start stream: Unexpected token '&lt;', "&lt;bod"... is not valid JSON</p></span></button></div></div></div><div class="message-buttons-right bubble message-buttons false svelte-hs6bgi" style="box-sizing: border-box; border: 1px solid var(--border-color-primary); border-radius: var(--radius-md); display: flex; align-items: center; height: var(--size-7); align-self: self-end; margin: 0px calc(var(--spacing-xl) * 3); z-index: 1; padding: var(--spacing-md) var(--spacing-md); background-color: rgb(17, 24, 39); gap: var(--spacing-md); color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px;"><button class="action svelte-6u540h" title="copy" aria-label="Copy message" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 16px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: relative; top: 0px; right: 0px; width: var(--size-4); height: var(--size-4);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 33 33" color="currentColor" aria-hidden="true"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg></button></div><div class="message-row bubble bot-row svelte-1e1jlin" style="box-sizing: border-box; border-width: 0px; border-style: solid; display: flex; position: relative; margin-bottom: var(--spacing-xl); align-self: flex-start; max-width: calc(100% - var(--spacing-xl) * 6); color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px; background-color: rgb(17, 24, 39);"><div class="flex-wrap bot svelte-1e1jlin" style="box-sizing: border-box; border-width: 1px; border-style: solid; width: 822.8px; height: 2433.45px; border-color: var(--border-color-primary); border-top-left-radius: ; border-top-right-radius: ; border-bottom-right-radius: ; border-bottom-left-radius: 0px; box-shadow: var(--shadow-drop); align-self: flex-start; text-align: right; padding: var(--spacing-sm) var(--spacing-xl); background-color: var(--background-fill-secondary);"><div class="message bot svelte-1e1jlin panel-full-width" style="box-sizing: border-box; border-width: 0px; border-style: solid; position: relative; display: flex; flex-direction: column; width: 801.2px; color: var(--body-text-color); font-size: var(--chatbot-body-text-size); overflow-wrap: break-word; border-color: var(--border-color-primary);"><button data-testid="bot" dir="ltr" aria-label="bot's message: This error indicates that the PHP server is returning an HTML error page instead of JSON. Let's debug this:

1. First, modify your signaling.php to ensure it's returning proper JSON:

```php
<?php
// Disable error display in HTML format
ini_set('display_errors', 0);
error_reporting(E_ALL);

// Set proper JSON headers
header('Content-Type: application/json');
header('Access-Control-Allow-Origin: *');
header('Access-Control-Allow-Methods: GET, POST');
header('Access-Control-Allow-Headers: Content-Type');

// Log errors to a file instead of displaying them
ini_set('log_errors', 1);
ini_set('error_log', 'debug.log');

try {
    // Directory to store stream data
    $streamDir = 'streams/';
    if (!file_exists($streamDir)) {
        if (!mkdir($streamDir, 0777, true)) {
            throw new Exception(&quot;Failed to create streams directory&quot;);
        }
    }

    if ($_SERVER['REQUEST_METHOD'] === 'POST') {
        $input = file_get_contents('php://input');
        $data = json_decode($input, true);
        
        if (json_last_error() !== JSON_ERROR_NONE) {
            throw new Exception(&quot;Invalid JSON input&quot;);
        }

        $action = $data['action'] ?? '';

        if ($action === 'create') {
            // Generate code and save offer
            do {
                $code = str_pad(rand(0, 999999), 6, '0', STR_PAD_LEFT);
            } while (file_exists($streamDir . $code . '.json'));

            $streamData = [
                'offer' => $data['offer'],
                'timestamp' => time(),
                'answer' => null
            ];
            
            if (!file_put_contents($streamDir . $code . '.json', json_encode($streamData))) {
                throw new Exception(&quot;Failed to save stream data&quot;);
            }
            
            echo json_encode(['code' => $code]);
        } 
        elseif ($action === 'answer') {
            // Handle answer
            $code = $data['code'];
            $filePath = $streamDir . $code . '.json';
            
            if (!file_exists($filePath)) {
                throw new Exception(&quot;Stream not found&quot;);
            }

            $streamData = json_decode(file_get_contents($filePath), true);
            $streamData['answer'] = $data['answer'];
            
            if (!file_put_contents($filePath, json_encode($streamData))) {
                throw new Exception(&quot;Failed to save answer&quot;);
            }
            
            echo json_encode(['status' => 'success']);
        }
        else {
            throw new Exception(&quot;Invalid action&quot;);
        }
    }
    elseif ($_SERVER['REQUEST_METHOD'] === 'GET') {
        $code = $_GET['code'] ?? '';
        $type = $_GET['type'] ?? '';
        $filePath = $streamDir . $code . '.json';

        if (!file_exists($filePath)) {
            throw new Exception(&quot;Stream not found&quot;);
        }

        $streamData = json_decode(file_get_contents($filePath), true);
        
        if ($type === 'offer') {
            echo json_encode(['offer' => $streamData['offer']]);
        }
        elseif ($type === 'answer') {
            echo json_encode(['answer' => $streamData['answer']]);
        }
        else {
            throw new Exception(&quot;Invalid type&quot;);
        }
    }
} catch (Exception $e) {
    http_response_code(400);
    echo json_encode(['error' => $e->getMessage()]);
    error_log(&quot;Error: &quot; . $e->getMessage());
}
?>
```

2. Create a test.php to verify the server is working:

```php
<?php
header('Content-Type: application/json');
header('Access-Control-Allow-Origin: *');
echo json_encode(['status' => 'working']);
?>
```

3. Modify your host.html fetch call to include error handling:

```javascript
debug('Sending offer to server...');" class="svelte-1e1jlin" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 20px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; width: 801.2px; user-select: text; text-align: left;"><span class="md svelte-8tpqd2 chatbot prose" style="box-sizing: border-box; border-width: 0px; border-style: solid; font-size: 18px; font-weight: var(--prose-text-weight); opacity: 0.8;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">This error indicates that the PHP server is returning an HTML error page instead of JSON. Let's debug this:</p><ol style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; padding: 0px; color: var(--body-text-color); list-style-position: inside; list-style-image: initial;"><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">First, modify your signaling.php to ensure it's returning proper JSON:</li></ol><div class="code_wrap" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: relative;"></div></span></button><button class="copy_code_button" title="copy" style="border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-sm); margin-left: 0px; padding: var(--spacing-md); font-weight: inherit; font-size: 18px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: absolute; top: var(--spacing-md); right: var(--spacing-md); z-index: 1; border-bottom-left-radius: var(--radius-sm); width: 25px; height: 25px;"><span class="copy-text" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><svg viewBox="0 0 32 32" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z" fill="currentColor"></path><path d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z" fill="currentColor"></path></svg></span><span class="check" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: absolute; top: 0px; right: 0px; opacity: 0; z-index: var(--layer-top); transition: opacity 0.2s; background: var(--background-fill-primary); padding: var(--size-1); width: 25px; height: 25px; margin-bottom: 0px !important;"><svg stroke-linejoin="round" stroke-linecap="round" stroke-width="3" stroke="currentColor" fill="none" viewBox="0 0 24 24" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><polyline points="20 6 9 17 4 12"></polyline></svg></span></button><pre style="box-sizing: border-box; border: none; margin-top: var(--spacing-sm); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; overflow: auto; position: relative; box-shadow: none; padding: var(--spacing-lg) var(--spacing-xl); text-shadow: none; border-radius: var(--radius-sm); margin-bottom: 0px !important;"><code class="language-php" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); background: none; font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; margin-bottom: 0px !important;">&lt;?php
// Disable error display in HTML format
ini_set('display_errors', 0);
error_reporting(E_ALL);

// Set proper JSON headers
header('Content-Type: application/json');
header('Access-Control-Allow-Origin: *');
header('Access-Control-Allow-Methods: GET, POST');
header('Access-Control-Allow-Headers: Content-Type');

// Log errors to a file instead of displaying them
ini_set('log_errors', 1);
ini_set('error_log', 'debug.log');

try {
    // Directory to store stream data
    $streamDir = 'streams/';
    if (!file_exists($streamDir)) {
        if (!mkdir($streamDir, 0777, true)) {
            throw new Exception("Failed to create streams directory");
        }
    }

    if ($_SERVER['REQUEST_METHOD'] === 'POST') {
        $input = file_get_contents('php://input');
        $data = json_decode($input, true);
        
        if (json_last_error() !== JSON_ERROR_NONE) {
            throw new Exception("Invalid JSON input");
        }

        $action = $data['action'] ?? '';

        if ($action === 'create') {
            // Generate code and save offer
            do {
                $code = str_pad(rand(0, 999999), 6, '0', STR_PAD_LEFT);
            } while (file_exists($streamDir . $code . '.json'));

            $streamData = [
                'offer' =&gt; $data['offer'],
                'timestamp' =&gt; time(),
                'answer' =&gt; null
            ];
            
            if (!file_put_contents($streamDir . $code . '.json', json_encode($streamData))) {
                throw new Exception("Failed to save stream data");
            }
            
            echo json_encode(['code' =&gt; $code]);
        } 
        elseif ($action === 'answer') {
            // Handle answer
            $code = $data['code'];
            $filePath = $streamDir . $code . '.json';
            
            if (!file_exists($filePath)) {
                throw new Exception("Stream not found");
            }

            $streamData = json_decode(file_get_contents($filePath), true);
            $streamData['answer'] = $data['answer'];
            
            if (!file_put_contents($filePath, json_encode($streamData))) {
                throw new Exception("Failed to save answer");
            }
            
            echo json_encode(['status' =&gt; 'success']);
        }
        else {
            throw new Exception("Invalid action");
        }
    }
    elseif ($_SERVER['REQUEST_METHOD'] === 'GET') {
        $code = $_GET['code'] ?? '';
        $type = $_GET['type'] ?? '';
        $filePath = $streamDir . $code . '.json';

        if (!file_exists($filePath)) {
            throw new Exception("Stream not found");
        }

        $streamData = json_decode(file_get_contents($filePath), true);
        
        if ($type === 'offer') {
            echo json_encode(['offer' =&gt; $streamData['offer']]);
        }
        elseif ($type === 'answer') {
            echo json_encode(['answer' =&gt; $streamData['answer']]);
        }
        else {
            throw new Exception("Invalid type");
        }
    }
} catch (Exception $e) {
    http_response_code(400);
    echo json_encode(['error' =&gt; $e-&gt;getMessage()]);
    error_log("Error: " . $e-&gt;getMessage());
}
?&gt;
</code></pre></div><ol start="2" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; padding: 0px; color: var(--body-text-color); list-style-position: inside; list-style-image: initial;"><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">Create a test.php to verify the server is working:</li></ol><div class="code_wrap" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: relative;"><button class="copy_code_button" title="copy" style="border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-sm); margin-left: 0px; padding: var(--spacing-md); font-weight: inherit; font-size: 18px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: absolute; top: var(--spacing-md); right: var(--spacing-md); z-index: 1; border-bottom-left-radius: var(--radius-sm); width: 25px; height: 25px;"><span class="copy-text" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><svg viewBox="0 0 32 32" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z" fill="currentColor"></path><path d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z" fill="currentColor"></path></svg></span><span class="check" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: absolute; top: 0px; right: 0px; opacity: 0; z-index: var(--layer-top); transition: opacity 0.2s; background: var(--background-fill-primary); padding: var(--size-1); width: 25px; height: 25px; margin-bottom: 0px !important;"><svg stroke-linejoin="round" stroke-linecap="round" stroke-width="3" stroke="currentColor" fill="none" viewBox="0 0 24 24" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><polyline points="20 6 9 17 4 12"></polyline></svg></span></button><pre style="box-sizing: border-box; border: none; margin-top: var(--spacing-sm); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; overflow: auto; position: relative; box-shadow: none; padding: var(--spacing-lg) var(--spacing-xl); text-shadow: none; border-radius: var(--radius-sm); margin-bottom: 0px !important;"><code class="language-php" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); background: none; font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; margin-bottom: 0px !important;">&lt;?php
header('Content-Type: application/json');
header('Access-Control-Allow-Origin: *');
echo json_encode(['status' =&gt; 'working']);
?&gt;
</code></pre></div><ol start="3" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; padding: 0px; color: var(--body-text-color); list-style-position: inside; list-style-image: initial;"><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">Modify your host.html fetch call to include error handling:</li></ol><div class="code_wrap" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: relative; margin-bottom: 0px !important;"><button class="copy_code_button" title="copy" style="border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-sm); margin-left: 0px; padding: var(--spacing-md); font-weight: inherit; font-size: 18px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: absolute; top: var(--spacing-md); right: var(--spacing-md); z-index: 1; border-bottom-left-radius: var(--radius-sm); width: 25px; height: 25px;"><span class="copy-text" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><svg viewBox="0 0 32 32" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z" fill="currentColor"></path><path d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z" fill="currentColor"></path></svg></span><span class="check" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: absolute; top: 0px; right: 0px; opacity: 0; z-index: var(--layer-top); transition: opacity 0.2s; background: var(--background-fill-primary); padding: var(--size-1); width: 25px; height: 25px; margin-bottom: 0px !important;"><svg stroke-linejoin="round" stroke-linecap="round" stroke-width="3" stroke="currentColor" fill="none" viewBox="0 0 24 24" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><polyline points="20 6 9 17 4 12"></polyline></svg></span></button><pre style="box-sizing: border-box; border: none; margin-top: var(--spacing-sm); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; overflow: auto; position: relative; box-shadow: none; padding: var(--spacing-lg) var(--spacing-xl); text-shadow: none; border-radius: var(--radius-sm); margin-bottom: 0px !important;"><code class="language-javascript" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); background: none; font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; margin-bottom: 0px !important;"><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">debug</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'Sending offer to server...'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">;</span>
</code></pre></div></div></div><div class="message-buttons-left bubble message-buttons false svelte-hs6bgi" style="box-sizing: border-box; border: 1px solid var(--border-color-primary); border-radius: var(--radius-md); display: flex; align-items: center; height: var(--size-7); align-self: start; margin: 0px calc(var(--spacing-xl) * 3); z-index: 1; padding: var(--spacing-md) var(--spacing-md); background-color: rgb(17, 24, 39); gap: var(--spacing-md); left: 0px; color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px;"><button class="action svelte-6u540h" title="copy" aria-label="Copy message" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 16px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: relative; top: 0px; right: 0px; width: var(--size-4); height: var(--size-4);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 33 33" color="currentColor" aria-hidden="true"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg></button></div><div class="message-row bubble user-row svelte-1e1jlin" style="box-sizing: border-box; border-width: 0px; border-style: solid; display: flex; position: relative; align-self: flex-end; margin-bottom: var(--spacing-xl); flex-direction: row; justify-content: flex-end; color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px; background-color: rgb(17, 24, 39);"><div class="flex-wrap user svelte-1e1jlin" style="box-sizing: border-box; border-width: 1px; border-style: solid; width: 383.062px; height: 38.85px; align-self: flex-start; border-top-left-radius: ; border-top-right-radius: ; border-bottom-left-radius: ; border-bottom-right-radius: 0px; box-shadow: var(--shadow-drop); text-align: right; padding: var(--spacing-sm) var(--spacing-xl); border-color: var(--border-color-accent-subdued); background-color: var(--color-accent-soft);"><div class="message user svelte-1e1jlin panel-full-width" style="box-sizing: border-box; border-width: 0px; border-style: solid; position: relative; display: flex; flex-direction: column; width: 361.462px; color: var(--body-text-color); font-size: var(--chatbot-body-text-size); overflow-wrap: break-word; align-self: flex-end;"><button data-testid="user" dir="ltr" aria-label="user's message: its still giving the same error even after changing" class="svelte-1e1jlin" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 20px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; width: 361.462px; user-select: text; text-align: left;"><span class="md svelte-8tpqd2 chatbot prose" style="box-sizing: border-box; border-width: 0px; border-style: solid; font-size: 18px; font-weight: var(--prose-text-weight); opacity: 0.8;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: 0px !important; margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">its still giving the same error even after changing</p></span></button></div></div></div><div class="message-buttons-right bubble message-buttons false svelte-hs6bgi" style="box-sizing: border-box; border: 1px solid var(--border-color-primary); border-radius: var(--radius-md); display: flex; align-items: center; height: var(--size-7); align-self: self-end; margin: 0px calc(var(--spacing-xl) * 3); z-index: 1; padding: var(--spacing-md) var(--spacing-md); background-color: rgb(17, 24, 39); gap: var(--spacing-md); color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px;"><button class="action svelte-6u540h" title="copy" aria-label="Copy message" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 16px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: relative; top: 0px; right: 0px; width: var(--size-4); height: var(--size-4);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 33 33" color="currentColor" aria-hidden="true"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg></button></div><div class="message-row bubble bot-row svelte-1e1jlin" style="box-sizing: border-box; border-width: 0px; border-style: solid; display: flex; position: relative; margin-bottom: var(--spacing-xl); align-self: flex-start; max-width: calc(100% - var(--spacing-xl) * 6); color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px; background-color: rgb(17, 24, 39);"><div class="flex-wrap bot svelte-1e1jlin" style="box-sizing: border-box; border-width: 1px; border-style: solid; width: 791.95px; height: 2394.4px; border-color: var(--border-color-primary); border-top-left-radius: ; border-top-right-radius: ; border-bottom-right-radius: ; border-bottom-left-radius: 0px; box-shadow: var(--shadow-drop); align-self: flex-start; text-align: right; padding: var(--spacing-sm) var(--spacing-xl); background-color: var(--background-fill-secondary);"><div class="message bot svelte-1e1jlin panel-full-width" style="box-sizing: border-box; border-width: 0px; border-style: solid; position: relative; display: flex; flex-direction: column; width: 770.35px; color: var(--body-text-color); font-size: var(--chatbot-body-text-size); overflow-wrap: break-word; border-color: var(--border-color-primary);"><button data-testid="bot" dir="ltr" aria-label="bot's message: Let's try to debug this step by step:

1. First, create a simple test.php to check if your server is properly configured:

```php
<?php
header('Content-Type: application/json');
header('Access-Control-Allow-Origin: *');
header('Access-Control-Allow-Methods: GET, POST');
header('Access-Control-Allow-Headers: Content-Type');

echo json_encode([
    'status' => 'working',
    'time' => date('Y-m-d H:i:s')
]);
?>
```

2. Then modify your host.html to first test the connection:

```html
<!DOCTYPE html>
<html lang=&quot;en&quot;>
<head>
    <meta charset=&quot;UTF-8&quot;>
    <meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;>
    <title>Host Video Stream - Test</title>
</head>
<body>
    <h1>Connection Test</h1>
    <div id=&quot;result&quot;></div>
    <button onclick=&quot;testConnection()&quot;>Test Connection</button>

    <script>
        const API_URL = 'https://piggy.rf.gd/jarvis/cctv/signaling-php/test.php';

        async function testConnection() {
            try {
                const response = await fetch(API_URL);
                const text = await response.text(); // Get raw text first
                console.log('Raw response:', text);
                
                try {
                    const data = JSON.parse(text);
                    console.log('Parsed JSON:', data);
                    document.getElementById('result').textContent = 
                        'Connection successful: ' + JSON.stringify(data);
                } catch (jsonError) {
                    console.error('JSON parsing error:', jsonError);
                    document.getElementById('result').textContent = 
                        'Received non-JSON response: ' + text;
                }
            } catch (error) {
                console.error('Fetch error:', error);
                document.getElementById('result').textContent = 
                    'Connection failed: ' + error.message;
            }
        }
    </script>
</body>
</html>
```

3. If you're still getting HTML instead of JSON, it might be because:
   - Your PHP file isn't being processed as PHP
   - There's a server configuration issue
   - There's an error in your PHP code that's causing the server to return an error page

Try this modified signaling.php:

```php
<?php
// First line should be blank - no spaces or anything before <?php

// For debugging
error_reporting(E_ALL);
ini_set('display_errors', 0);
ini_set('log_errors', 1);
ini_set('error_log', 'error.log');

// Set headers
header('Content-Type: application/json');
header('Access-Control-Allow-Origin: *');
header('Access-Control-Allow-Methods: GET, POST');
header('Access-Control-Allow-Headers: Content-Type');

// Log request details
error_log(&quot;Request received: &quot; . $_SERVER['REQUEST_METHOD']);
error_log(&quot;Raw input: &quot; . file_get_contents('php://input'));

// Simple test response
echo json_encode([
    'status' => 'ok',
    'method' => $_SERVER['REQUEST_METHOD'],
    'time' => date('Y-m-d H:i:s')
]);
?>
```

4. Also check your server's file extension associations:
   - Make sure the file has a .php extension
   - Make sure your web server is configured to process .php files with PHP
   - Check if PHP is installed and running on your server

5. You can also try accessing the PHP file directly in your browser:
   `https://piggy.rf.gd/jarvis/cctv/signaling-php/test.php`

If you see HTML output instead of JSON, it means your PHP isn't being processed correctly. In that case:

1. Check if your hosting provider supports PHP
2. Make sure the file extension is .php
3. Try adding a .htaccess file in your directory:

```apache
AddType application/x-httpd-php .php
```

Let me know what you see when you:
1. Access test.php directly in your" class="svelte-1e1jlin" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 20px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; width: 770.35px; user-select: text; text-align: left;"><span class="md svelte-8tpqd2 chatbot prose" style="box-sizing: border-box; border-width: 0px; border-style: solid; font-size: 18px; font-weight: var(--prose-text-weight); opacity: 0.8;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">Let's try to debug this step by step:</p><ol style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; padding: 0px; color: var(--body-text-color); list-style-position: inside; list-style-image: initial;"><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">First, create a simple test.php to check if your server is properly configured:</li></ol><div class="code_wrap" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: relative;"></div></span></button><button class="copy_code_button" title="copy" style="border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-sm); margin-left: 0px; padding: var(--spacing-md); font-weight: inherit; font-size: 18px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: absolute; top: var(--spacing-md); right: var(--spacing-md); z-index: 1; border-bottom-left-radius: var(--radius-sm); width: 25px; height: 25px;"><span class="copy-text" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><svg viewBox="0 0 32 32" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z" fill="currentColor"></path><path d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z" fill="currentColor"></path></svg></span><span class="check" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: absolute; top: 0px; right: 0px; opacity: 0; z-index: var(--layer-top); transition: opacity 0.2s; background: var(--background-fill-primary); padding: var(--size-1); width: 25px; height: 25px; margin-bottom: 0px !important;"><svg stroke-linejoin="round" stroke-linecap="round" stroke-width="3" stroke="currentColor" fill="none" viewBox="0 0 24 24" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><polyline points="20 6 9 17 4 12"></polyline></svg></span></button><pre style="box-sizing: border-box; border: none; margin-top: var(--spacing-sm); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; overflow: auto; position: relative; box-shadow: none; padding: var(--spacing-lg) var(--spacing-xl); text-shadow: none; border-radius: var(--radius-sm); margin-bottom: 0px !important;"><code class="language-php" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); background: none; font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; margin-bottom: 0px !important;">&lt;?php
header('Content-Type: application/json');
header('Access-Control-Allow-Origin: *');
header('Access-Control-Allow-Methods: GET, POST');
header('Access-Control-Allow-Headers: Content-Type');

echo json_encode([
    'status' =&gt; 'working',
    'time' =&gt; date('Y-m-d H:i:s')
]);
?&gt;
</code></pre></div><ol start="2" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; padding: 0px; color: var(--body-text-color); list-style-position: inside; list-style-image: initial;"><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">Then modify your host.html to first test the connection:</li></ol><div class="code_wrap" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: relative;"><button class="copy_code_button" title="copy" style="border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-sm); margin-left: 0px; padding: var(--spacing-md); font-weight: inherit; font-size: 18px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: absolute; top: var(--spacing-md); right: var(--spacing-md); z-index: 1; border-bottom-left-radius: var(--radius-sm); width: 25px; height: 25px;"><span class="copy-text" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><svg viewBox="0 0 32 32" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z" fill="currentColor"></path><path d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z" fill="currentColor"></path></svg></span><span class="check" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: absolute; top: 0px; right: 0px; opacity: 0; z-index: var(--layer-top); transition: opacity 0.2s; background: var(--background-fill-primary); padding: var(--size-1); width: 25px; height: 25px; margin-bottom: 0px !important;"><svg stroke-linejoin="round" stroke-linecap="round" stroke-width="3" stroke="currentColor" fill="none" viewBox="0 0 24 24" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><polyline points="20 6 9 17 4 12"></polyline></svg></span></button><pre style="box-sizing: border-box; border: none; margin-top: var(--spacing-sm); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; overflow: auto; position: relative; box-shadow: none; padding: var(--spacing-lg) var(--spacing-xl); text-shadow: none; border-radius: var(--radius-sm); margin-bottom: 0px !important;"><code class="language-html" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); background: none; font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; margin-bottom: 0px !important;"><span class="token doctype" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">&lt;!</span><span class="token doctype-tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);">DOCTYPE</span> <span class="token name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);">html</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>html</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">lang</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>en<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>head</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>meta</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">charset</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>UTF-8<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>meta</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">name</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>viewport<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">content</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>width=device-width, initial-scale=1.0<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>title</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>Host Video Stream - Test<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>title</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>head</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>body</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>h1</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>Connection Test<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>h1</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>div</span> <span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">id</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span>result<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>div</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>button</span> <span class="token special-attr" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token attr-name" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">onclick</span><span class="token attr-value" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121); margin-bottom: 0px !important;"><span class="token punctuation attr-equals" style="box-sizing: border-box; border-width: 0px; border-style: solid;">=</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid;">"</span><span class="token value javascript language-javascript" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">testConnection</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">)</span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-bottom: 0px !important;">"</span></span></span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>Test Connection<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>button</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>

    <span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;</span>script</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span><span class="token script" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><span class="token language-javascript" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">
        <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">const</span> <span class="token constant" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">API_URL</span> <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'https://piggy.rf.gd/jarvis/cctv/signaling-php/test.php'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>

        <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">async</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">function</span> <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">testConnection</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
            <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">try</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">const</span> response <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">await</span> <span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">fetch</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token constant" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">API_URL</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">const</span> text <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">await</span> response<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">text</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span> <span class="token comment" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(92, 99, 112);">// Get raw text first</span>
                console<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">log</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'Raw response:'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">,</span> text<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                
                <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">try</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                    <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">const</span> data <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> <span class="token constant" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">JSON</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">parse</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>text<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                    console<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">log</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'Parsed JSON:'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">,</span> data<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                    document<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">getElementById</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'result'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>textContent <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> 
                        <span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'Connection successful: '</span> <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">+</span> <span class="token constant" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(209, 154, 102);">JSON</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">stringify</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>data<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">catch</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>jsonError<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                    console<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">error</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'JSON parsing error:'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">,</span> jsonError<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                    document<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">getElementById</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'result'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>textContent <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> 
                        <span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'Received non-JSON response: '</span> <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">+</span> text<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>
            <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span> <span class="token keyword" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(198, 120, 221);">catch</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span>error<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span> <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">{</span>
                console<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">error</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'Fetch error:'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">,</span> error<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
                document<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span><span class="token function" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">getElementById</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">(</span><span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'result'</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">)</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>textContent <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">=</span> 
                    <span class="token string" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(152, 195, 121);">'Connection failed: '</span> <span class="token operator" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(97, 175, 239);">+</span> error<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">.</span>message<span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">;</span>
            <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191);">}</span>
        <span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">}</span>
    </span></span><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>script</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117);"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>body</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
<span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(224, 108, 117); margin-bottom: 0px !important;"><span class="token tag" style="box-sizing: border-box; border-width: 0px; border-style: solid;"><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&lt;/</span>html</span><span class="token punctuation" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: rgb(171, 178, 191); margin-bottom: 0px !important;">&gt;</span></span>
</code></pre></div><ol start="3" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; padding: 0px; color: var(--body-text-color); list-style-position: inside; list-style-image: initial;"><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">If you're still getting HTML instead of JSON, it might be because:<ul style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0.5em; margin-right: 0px; margin-left: 0px; padding: 0px; color: var(--body-text-color); list-style-position: inside; list-style-image: initial; font-size: 16.2px; padding-inline-start: 2em; margin-bottom: 0px !important;"><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;">Your PHP file isn't being processed as PHP</li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;">There's a server configuration issue</li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">There's an error in your PHP code that's causing the server to return an error page</li></ul></li></ol><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: var(--spacing-xxl); margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">Try this modified signaling.php:</p><div class="code_wrap" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: relative;"><button class="copy_code_button" title="copy" style="border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-sm); margin-left: 0px; padding: var(--spacing-md); font-weight: inherit; font-size: 18px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: absolute; top: var(--spacing-md); right: var(--spacing-md); z-index: 1; border-bottom-left-radius: var(--radius-sm); width: 25px; height: 25px;"><span class="copy-text" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><svg viewBox="0 0 32 32" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z" fill="currentColor"></path><path d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z" fill="currentColor"></path></svg></span><span class="check" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: absolute; top: 0px; right: 0px; opacity: 0; z-index: var(--layer-top); transition: opacity 0.2s; background: var(--background-fill-primary); padding: var(--size-1); width: 25px; height: 25px; margin-bottom: 0px !important;"><svg stroke-linejoin="round" stroke-linecap="round" stroke-width="3" stroke="currentColor" fill="none" viewBox="0 0 24 24" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><polyline points="20 6 9 17 4 12"></polyline></svg></span></button><pre style="box-sizing: border-box; border: none; margin-top: var(--spacing-sm); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; overflow: auto; position: relative; box-shadow: none; padding: var(--spacing-lg) var(--spacing-xl); text-shadow: none; border-radius: var(--radius-sm); margin-bottom: 0px !important;"><code class="language-php" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); background: none; font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; margin-bottom: 0px !important;">&lt;?php
// First line should be blank - no spaces or anything before &lt;?php

// For debugging
error_reporting(E_ALL);
ini_set('display_errors', 0);
ini_set('log_errors', 1);
ini_set('error_log', 'error.log');

// Set headers
header('Content-Type: application/json');
header('Access-Control-Allow-Origin: *');
header('Access-Control-Allow-Methods: GET, POST');
header('Access-Control-Allow-Headers: Content-Type');

// Log request details
error_log("Request received: " . $_SERVER['REQUEST_METHOD']);
error_log("Raw input: " . file_get_contents('php://input'));

// Simple test response
echo json_encode([
    'status' =&gt; 'ok',
    'method' =&gt; $_SERVER['REQUEST_METHOD'],
    'time' =&gt; date('Y-m-d H:i:s')
]);
?&gt;
</code></pre></div><ol start="4" style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; padding: 0px; color: var(--body-text-color); list-style-position: inside; list-style-image: initial;"><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg); display: inline;">Also check your server's file extension associations:</p><ul style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0.5em; margin-right: 0px; margin-left: 0px; padding: 0px; color: var(--body-text-color); list-style-position: inside; list-style-image: initial; font-size: 16.2px; padding-inline-start: 2em; margin-bottom: 0px !important;"><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;">Make sure the file has a .php extension</li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;">Make sure your web server is configured to process .php files with PHP</li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">Check if PHP is installed and running on your server</li></ul></li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: 0px !important; margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg); display: inline;">You can also try accessing the PHP file directly in your browser:<br style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><code style="box-sizing: border-box; border: 1px solid var(--panel-border-color); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; border-radius: var(--radius-xs); padding: var(--spacing-xxs) var(--spacing-xs); margin-bottom: 0px !important;">https://piggy.rf.gd/jarvis/cctv/signaling-php/test.php</code></p></li></ol><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: var(--spacing-xxl); margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">If you see HTML output instead of JSON, it means your PHP isn't being processed correctly. In that case:</p><ol style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; padding: 0px; color: var(--body-text-color); list-style-position: inside; list-style-image: initial;"><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;">Check if your hosting provider supports PHP</li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;">Make sure the file extension is .php</li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">Try adding a .htaccess file in your directory:</li></ol><div class="code_wrap" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: relative;"><button class="copy_code_button" title="copy" style="border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-sm); margin-left: 0px; padding: var(--spacing-md); font-weight: inherit; font-size: 18px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: absolute; top: var(--spacing-md); right: var(--spacing-md); z-index: 1; border-bottom-left-radius: var(--radius-sm); width: 25px; height: 25px;"><span class="copy-text" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><svg viewBox="0 0 32 32" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z" fill="currentColor"></path><path d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z" fill="currentColor"></path></svg></span><span class="check" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: absolute; top: 0px; right: 0px; opacity: 0; z-index: var(--layer-top); transition: opacity 0.2s; background: var(--background-fill-primary); padding: var(--size-1); width: 25px; height: 25px; margin-bottom: 0px !important;"><svg stroke-linejoin="round" stroke-linecap="round" stroke-width="3" stroke="currentColor" fill="none" viewBox="0 0 24 24" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><polyline points="20 6 9 17 4 12"></polyline></svg></span></button><pre style="box-sizing: border-box; border: none; margin-top: var(--spacing-sm); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; overflow: auto; position: relative; box-shadow: none; padding: var(--spacing-lg) var(--spacing-xl); text-shadow: none; border-radius: var(--radius-sm); margin-bottom: 0px !important;"><code class="language-apache" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); background: none; font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; margin-bottom: 0px !important;">AddType application/x-httpd-php .php
</code></pre></div><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: var(--spacing-xxl); margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">Let me know what you see when you:</p><ol style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-left: 0px; padding: 0px; color: var(--body-text-color); list-style-position: inside; list-style-image: initial; margin-bottom: 0px !important;"><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">Access test.php directly in your</li></ol></div></div><div class="message-buttons-left bubble message-buttons false svelte-hs6bgi" style="box-sizing: border-box; border: 1px solid var(--border-color-primary); border-radius: var(--radius-md); display: flex; align-items: center; height: var(--size-7); align-self: start; margin: 0px calc(var(--spacing-xl) * 3); z-index: 1; padding: var(--spacing-md) var(--spacing-md); background-color: rgb(17, 24, 39); gap: var(--spacing-md); left: 0px; color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px;"><button class="action svelte-6u540h" title="copy" aria-label="Copy message" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 16px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: relative; top: 0px; right: 0px; width: var(--size-4); height: var(--size-4);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 33 33" color="currentColor" aria-hidden="true"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg></button></div><div class="message-row bubble user-row svelte-1e1jlin" style="box-sizing: border-box; border-width: 0px; border-style: solid; display: flex; position: relative; align-self: flex-end; margin-bottom: var(--spacing-xl); flex-direction: row; justify-content: flex-end; color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px; background-color: rgb(17, 24, 39);"><div class="flex-wrap user svelte-1e1jlin" style="box-sizing: border-box; border-width: 1px; border-style: solid; width: 939.513px; height: 38.85px; align-self: flex-start; border-top-left-radius: ; border-top-right-radius: ; border-bottom-left-radius: ; border-bottom-right-radius: 0px; box-shadow: var(--shadow-drop); text-align: right; padding: var(--spacing-sm) var(--spacing-xl); border-color: var(--border-color-accent-subdued); background-color: var(--color-accent-soft);"><div class="message user svelte-1e1jlin panel-full-width" style="box-sizing: border-box; border-width: 0px; border-style: solid; position: relative; display: flex; flex-direction: column; width: 917.912px; color: var(--body-text-color); font-size: var(--chatbot-body-text-size); overflow-wrap: break-word; align-self: flex-end;"><button data-testid="user" dir="ltr" aria-label="user's message: cant you modify signaling file to display plain text instead of any html or json etc. just fix this, and now it is able to fetch and " class="svelte-1e1jlin" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 20px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; width: 917.912px; user-select: text; text-align: left;"><span class="md svelte-8tpqd2 chatbot prose" style="box-sizing: border-box; border-width: 0px; border-style: solid; font-size: 18px; font-weight: var(--prose-text-weight); opacity: 0.8;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: 0px !important; margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">cant you modify signaling file to display plain text instead of any html or json etc. just fix this, and now it is able to fetch and</p></span></button></div></div></div><div class="message-buttons-right bubble message-buttons false svelte-hs6bgi" style="box-sizing: border-box; border: 1px solid var(--border-color-primary); border-radius: var(--radius-md); display: flex; align-items: center; height: var(--size-7); align-self: self-end; margin: 0px calc(var(--spacing-xl) * 3); z-index: 1; padding: var(--spacing-md) var(--spacing-md); background-color: rgb(17, 24, 39); gap: var(--spacing-md); color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px;"><button class="action svelte-6u540h" title="copy" aria-label="Copy message" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 16px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: relative; top: 0px; right: 0px; width: var(--size-4); height: var(--size-4);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 33 33" color="currentColor" aria-hidden="true"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg></button></div><div class="message-row bubble bot-row svelte-1e1jlin" style="box-sizing: border-box; border-width: 0px; border-style: solid; display: flex; position: relative; margin-bottom: var(--spacing-xl); align-self: flex-start; max-width: calc(100% - var(--spacing-xl) * 6); color: rgb(255, 255, 255); font-family: &quot;Source Sans Pro&quot;, ui-sans-serif, &quot;system-ui&quot;, sans-serif; font-size: 16px; background-color: rgb(17, 24, 39);"><div class="flex-wrap bot svelte-1e1jlin" style="box-sizing: border-box; border-width: 1px; border-style: solid; width: 1192.53px; height: 1482.15px; border-color: var(--border-color-primary); border-top-left-radius: ; border-top-right-radius: ; border-bottom-right-radius: ; border-bottom-left-radius: 0px; box-shadow: var(--shadow-drop); align-self: flex-start; text-align: right; padding: var(--spacing-sm) var(--spacing-xl); background-color: var(--background-fill-secondary);"><div class="message bot svelte-1e1jlin panel-full-width" style="box-sizing: border-box; border-width: 0px; border-style: solid; position: relative; display: flex; flex-direction: column; width: 1170.93px; color: var(--body-text-color); font-size: var(--chatbot-body-text-size); overflow-wrap: break-word; border-color: var(--border-color-primary);"><button data-testid="bot" dir="ltr" aria-label="bot's message: Yes, let's modify the signaling.php to output plain text first to debug:

```php
<?php
// Disable any HTML output
error_reporting(0);
ini_set('display_errors', 0);

// Just output plain text
header('Content-Type: text/plain');
header('Access-Control-Allow-Origin: *');
header('Access-Control-Allow-Methods: GET, POST');
header('Access-Control-Allow-Headers: Content-Type');

// Create streams directory if it doesn't exist
$streamDir = 'streams/';
if (!file_exists($streamDir)) {
    mkdir($streamDir, 0777, true);
}

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $input = file_get_contents('php://input');
    $data = json_decode($input, true);
    
    if ($data['action'] === 'create') {
        // Generate code
        $code = str_pad(rand(0, 999999), 6, '0', STR_PAD_LEFT);
        
        // Save data
        file_put_contents($streamDir . $code . '.txt', $data['offer']);
        
        // Return just the code
        echo $code;
    }
    else if ($data['action'] === 'answer') {
        $code = $data['code'];
        file_put_contents($streamDir . $code . '_answer.txt', $data['answer']);
        echo &quot;OK&quot;;
    }
}
else if ($_SERVER['REQUEST_METHOD'] === 'GET') {
    $code = $_GET['code'];
    $type = $_GET['type'];
    
    if ($type === 'offer') {
        if (file_exists($streamDir . $code . '.txt')) {
            echo file_get_contents($streamDir . $code . '.txt');
        } else {
            echo &quot;NOT_FOUND&quot;;
        }
    }
    else if ($type === 'answer') {
        if (file_exists($streamDir . $code . '_answer.txt')) {
            echo file_get_contents($streamDir . $code . '_answer.txt');
        } else {
            echo &quot;NO_ANSWER&quot;;
        }
    }
}
?>
```

This version:
1. Uses plain text responses instead of JSON
2. Stores data in simple text files
3. Uses minimal error handling
4. Has simple responses like &quot;OK&quot;, &quot;NOT_FOUND&quot;, etc.

You'll need to modify your JavaScript code to handle these plain text responses. Let me know if you want me to provide the modified JavaScript code as well." class="svelte-1e1jlin latest" style="border-width: 0px; border-style: solid; margin: 0px; padding: 0px; font-weight: inherit; font-size: 20px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; width: 1170.93px; user-select: text; text-align: left;"><span class="md svelte-8tpqd2 chatbot prose" style="box-sizing: border-box; border-width: 0px; border-style: solid; font-size: 18px; font-weight: var(--prose-text-weight); opacity: 0.8;"><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">Yes, let's modify the signaling.php to output plain text first to debug:</p><div class="code_wrap" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: relative;"></div></span></button><button class="copy_code_button" title="copy" style="border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-sm); margin-left: 0px; padding: var(--spacing-md); font-weight: inherit; font-size: 18px; line-height: inherit; font-family: inherit; appearance: button; background-image: none; cursor: pointer; position: absolute; top: var(--spacing-md); right: var(--spacing-md); z-index: 1; border-bottom-left-radius: var(--radius-sm); width: 25px; height: 25px;"><span class="copy-text" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color);"><svg viewBox="0 0 32 32" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z" fill="currentColor"></path><path d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z" fill="currentColor"></path></svg></span><span class="check" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); position: absolute; top: 0px; right: 0px; opacity: 0; z-index: var(--layer-top); transition: opacity 0.2s; background: var(--background-fill-primary); padding: var(--size-1); width: 25px; height: 25px; margin-bottom: 0px !important;"><svg stroke-linejoin="round" stroke-linecap="round" stroke-width="3" stroke="currentColor" fill="none" viewBox="0 0 24 24" height="100%" width="100%" xmlns="http://www.w3.org/2000/svg"><polyline points="20 6 9 17 4 12"></polyline></svg></span></button><pre style="box-sizing: border-box; border: none; margin-top: var(--spacing-sm); color: var(--body-text-color); background: var(--code-background-fill); font-family: var(--font-mono); font-size: var(--text-sm); text-align: left; word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; overflow: auto; position: relative; box-shadow: none; padding: var(--spacing-lg) var(--spacing-xl); text-shadow: none; border-radius: var(--radius-sm); margin-bottom: 0px !important;"><code class="language-php" style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); background: none; font-family: var(--font-mono); font-size: var(--text-sm); word-spacing: normal; word-break: normal; overflow-wrap: normal; line-height: 1.5; tab-size: 2; hyphens: none; margin-bottom: 0px !important;">&lt;?php
// Disable any HTML output
error_reporting(0);
ini_set('display_errors', 0);

// Just output plain text
header('Content-Type: text/plain');
header('Access-Control-Allow-Origin: *');
header('Access-Control-Allow-Methods: GET, POST');
header('Access-Control-Allow-Headers: Content-Type');

// Create streams directory if it doesn't exist
$streamDir = 'streams/';
if (!file_exists($streamDir)) {
    mkdir($streamDir, 0777, true);
}

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $input = file_get_contents('php://input');
    $data = json_decode($input, true);
    
    if ($data['action'] === 'create') {
        // Generate code
        $code = str_pad(rand(0, 999999), 6, '0', STR_PAD_LEFT);
        
        // Save data
        file_put_contents($streamDir . $code . '.txt', $data['offer']);
        
        // Return just the code
        echo $code;
    }
    else if ($data['action'] === 'answer') {
        $code = $data['code'];
        file_put_contents($streamDir . $code . '_answer.txt', $data['answer']);
        echo "OK";
    }
}
else if ($_SERVER['REQUEST_METHOD'] === 'GET') {
    $code = $_GET['code'];
    $type = $_GET['type'];
    
    if ($type === 'offer') {
        if (file_exists($streamDir . $code . '.txt')) {
            echo file_get_contents($streamDir . $code . '.txt');
        } else {
            echo "NOT_FOUND";
        }
    }
    else if ($type === 'answer') {
        if (file_exists($streamDir . $code . '_answer.txt')) {
            echo file_get_contents($streamDir . $code . '_answer.txt');
        } else {
            echo "NO_ANSWER";
        }
    }
}
?&gt;
</code></pre></div><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: var(--spacing-xxl); margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">This version:</p><ol style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: 0px; margin-right: 0px; margin-bottom: var(--spacing-md); margin-left: 0px; padding: 0px; color: var(--body-text-color); list-style-position: inside; list-style-image: initial;"><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;">Uses plain text responses instead of JSON</li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;">Stores data in simple text files</li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0.5em;">Uses minimal error handling</li><li style="box-sizing: border-box; border-width: 0px; border-style: solid; color: var(--body-text-color); margin-bottom: 0px !important;">Has simple responses like "OK", "NOT_FOUND", etc.</li></ol><p style="box-sizing: border-box; border-width: 0px; border-style: solid; margin-top: var(--spacing-xxl); margin-right: 0px; margin-bottom: 0px !important; margin-left: 0px; color: var(--body-text-color); line-height: var(--line-lg);">You'll need to modify your JavaScript code to handle these plain text responses. Let me know if you want me to provide the modified JavaScript code as well.</p></div></div><p>Saved at: 2024-11-07 01:22:34</p>